<!-- Generated by SpecStory -->

# liltoonã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã®è¨­å®š (2025-06-21 19:45:51)

_**User**_

liltoonã®ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ã‚ˆã†ã«ã—ã¦

---

_**Assistant**_

ç¾åœ¨ã®ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ã«ã‚ã‚‹lilToonã®PCSSã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèªã—ã€lilToonã®ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦æ­£ã—ãæ©Ÿèƒ½ã™ã‚‹ã‚ˆã†ã«èª¿æ•´ã„ãŸã—ã¾ã™ã€‚

ã¾ãšã€ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã‚’ç¢ºèªã—ã¾ã™ï¼š

---

<details>
            <summary>Listed current directory â€¢ **8** results</summary>
        
| Name |
|-------|
| ğŸ“ `.specstory` |
| ğŸ“„ `.cursorindexingignore` |
| ğŸ“„ `PCSS_ModularAvatar_Guide.md` |
| ğŸ“„ `LilToonPCSSMenuIntegration.cs` |
| ğŸ“„ `ModularAvatarPCSSIntegration.cs` |
| ğŸ“„ `liltoon_pcss_urp.shader` |
| ğŸ“„ `liltoon_pcss_readme.md` |
| ğŸ“„ `liltoon_pcss_extension.shader` |

</details>

---

æ¬¡ã«ã€å„ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹ã‚’ç¢ºèªã—ã¦ã€lilToonãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦ã®æ§‹é€ ã‚’ç†è§£ã—ã¾ã™ï¼š

---

Read file: liltoon_pcss_readme.md

---

Read file: LilToonPCSSMenuIntegration.cs

---

Read file: liltoon_pcss_extension.shader

---

æ¬¡ã«ã€ModularAvatarçµ±åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚‚ç¢ºèªã—ã¾ã™ï¼š

---

Read file: ModularAvatarPCSSIntegration.cs

---

ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆã‚’åˆ†æã—ãŸçµæœã€lilToonã®ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦æ©Ÿèƒ½ã™ã‚‹ãŸã‚ã®é©åˆ‡ãªæ§‹é€ ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã®æ”¹å–„ã‚’è¡Œã„ã¾ã™ï¼š

1. **ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ§‹é€ ã®æ•´ç†**
2. **lilToonã¨ã®çµ±åˆæ”¹å–„**
3. **ã‚¨ãƒ‡ã‚£ã‚¿çµ±åˆã®å¼·åŒ–**
4. **ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸æ§‹é€ ã®æœ€é©åŒ–**

ã¾ãšã€é©åˆ‡ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã‚’ä½œæˆã—ã¾ã™ï¼š

---

```diff
- 
+ {
+   "name": "com.liltoon.pcss-extension",
+   "displayName": "lilToon PCSS Extension",
+   "version": "1.0.0",
+   "description": "PCSS (Percentage-Closer Soft Shadows) extension for lilToon shader system",
+   "unity": "2019.4",
+   "unityRelease": "0f1",
+   "keywords": [
+     "shader",
+     "toon",
+     "avatar",
+     "pcss",
+     "shadows",
+     "vrchat",
+     "liltoon"
+   ],
+   "author": {
+     "name": "lilToon PCSS Extension Team"
+   },
+   "dependencies": {
+     "com.unity.render-pipelines.universal": "7.1.8"
+   },
+   "repository": {
+     "type": "git",
+     "url": "https://github.com/your-username/liltoon-pcss-extension.git"
+   },
+   "license": "MIT",
+   "samples": [
+     {
+       "displayName": "PCSS Sample Materials",
+       "description": "Sample materials demonstrating PCSS effects",
+       "path": "Samples~/PCSSMaterials"
+     }
+   ]
+ } 
```

---

æ¬¡ã«ã€lilToonã¨ã®çµ±åˆã‚’æ”¹å–„ã™ã‚‹ãŸã‚ã®ã‚¨ãƒ‡ã‚£ã‚¿æ‹¡å¼µã‚’ä½œæˆã—ã¾ã™ï¼š

---

```diff
- 
+ using UnityEngine;
+ using UnityEditor;
+ using System.IO;
+ using System.Collections.Generic;
+ 
+ #if UNITY_EDITOR
+ namespace lilToon.PCSS
+ {
+     /// <summary>
+     /// lilToon PCSS ExtensionåˆæœŸåŒ–ã‚¯ãƒ©ã‚¹
+     /// lilToonã®èª­ã¿è¾¼ã¿å¾Œã«è‡ªå‹•çš„ã«PCSSã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ã‚’çµ±åˆã—ã¾ã™
+     /// </summary>
+     [InitializeOnLoad]
+     public class LilToonPCSSExtensionInitializer
+     {
+         private const string PCSS_EXTENSION_DEFINE = "LILTOON_PCSS_EXTENSION";
+         private const string LILTOON_DEFINE = "LILTOON";
+         
+         static LilToonPCSSExtensionInitializer()
+         {
+             EditorApplication.delayCall += Initialize;
+         }
+         
+         private static void Initialize()
+         {
+             CheckAndSetupExtension();
+             RegisterShaderVariants();
+             SetupMenuIntegration();
+         }
+         
+         /// <summary>
+         /// PCSSæ‹¡å¼µã®è¨­å®šã¨ã‚·ãƒ³ãƒœãƒ«å®šç¾©ã‚’è¡Œã„ã¾ã™
+         /// </summary>
+         private static void CheckAndSetupExtension()
+         {
+             // lilToonãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
+             bool hasLilToon = IsLilToonInstalled();
+             
+             if (hasLilToon)
+             {
+                 AddDefineSymbol(PCSS_EXTENSION_DEFINE);
+                 Debug.Log("[lilToon PCSS Extension] lilToonãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚PCSSæ‹¡å¼µãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¾ã—ãŸã€‚");
+             }
+             else
+             {
+                 RemoveDefineSymbol(PCSS_EXTENSION_DEFINE);
+                 Debug.LogWarning("[lilToon PCSS Extension] lilToonãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚å…ˆã«lilToonã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚");
+             }
+         }
+         
+         /// <summary>
+         /// lilToonãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
+         /// </summary>
+         private static bool IsLilToonInstalled()
+         {
+             // lilToonã®ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢
+             string[] shaderGuids = AssetDatabase.FindAssets("t:Shader", new[] { "Assets" });
+             
+             foreach (string guid in shaderGuids)
+             {
+                 string path = AssetDatabase.GUIDToAssetPath(guid);
+                 if (path.Contains("lilToon") && path.Contains(".shader"))
+                 {
+                     Shader shader = AssetDatabase.LoadAssetAtPath<Shader>(path);
+                     if (shader != null && shader.name.StartsWith("lilToon/"))
+                     {
+                         return true;
+                     }
+                 }
+             }
+             
+             // UPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¨ã—ã¦ã®lilToonã‚‚ãƒã‚§ãƒƒã‚¯
+             var packagePath = "Packages/com.lilxyzw.liltoon";
+             if (Directory.Exists(packagePath))
+             {
+                 return true;
+             }
+             
+             return false;
+         }
+         
+         /// <summary>
+         /// ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒãƒªã‚¢ãƒ³ãƒˆã‚’ç™»éŒ²
+         /// </summary>
+         private static void RegisterShaderVariants()
+         {
+             // PCSSã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒãƒªã‚¢ãƒ³ãƒˆã‚’äº‹å‰ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãƒªã‚¹ãƒˆã«è¿½åŠ 
+             var shaderVariantCollection = Resources.Load<ShaderVariantCollection>("PCSSShaderVariants");
+             if (shaderVariantCollection == null)
+             {
+                 CreateShaderVariantCollection();
+             }
+         }
+         
+         /// <summary>
+         /// ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒãƒªã‚¢ãƒ³ãƒˆã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ
+         /// </summary>
+         private static void CreateShaderVariantCollection()
+         {
+             var collection = new ShaderVariantCollection();
+             
+             // PCSSã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã®ãƒãƒªã‚¢ãƒ³ãƒˆã‚’è¿½åŠ 
+             var pcssShader = Shader.Find("lilToon/PCSS Extension");
+             if (pcssShader != null)
+             {
+                 // ä¸»è¦ãªã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰çµ„ã¿åˆã‚ã›ã‚’è¿½åŠ 
+                 string[] keywords = {
+                     "_USEPCSS_ON",
+                     "_USESHADOW_ON",
+                     "_USEPCSS_ON _USESHADOW_ON"
+                 };
+                 
+                 foreach (string keyword in keywords)
+                 {
+                     var variant = new ShaderVariantCollection.ShaderVariant(
+                         pcssShader, 
+                         UnityEngine.Rendering.PassType.ForwardBase, 
+                         keyword.Split(' ')
+                     );
+                     collection.Add(variant);
+                 }
+             }
+             
+             // Resourcesãƒ•ã‚©ãƒ«ãƒ€ã«ä¿å­˜
+             string resourcesPath = "Assets/Resources";
+             if (!Directory.Exists(resourcesPath))
+             {
+                 Directory.CreateDirectory(resourcesPath);
+             }
+             
+             AssetDatabase.CreateAsset(collection, "Assets/Resources/PCSSShaderVariants.shadervariants");
+             AssetDatabase.SaveAssets();
+         }
+         
+         /// <summary>
+         /// ãƒ¡ãƒ‹ãƒ¥ãƒ¼çµ±åˆã®è¨­å®š
+         /// </summary>
+         private static void SetupMenuIntegration()
+         {
+             // lilToonã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã¨çµ±åˆ
+             EditorApplication.hierarchyWindowItemOnGUI += OnHierarchyGUI;
+         }
+         
+         /// <summary>
+         /// ãƒ’ã‚¨ãƒ©ãƒ«ã‚­ãƒ¼ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§ã®GUIè¡¨ç¤º
+         /// </summary>
+         private static void OnHierarchyGUI(int instanceID, Rect selectionRect)
+         {
+             GameObject obj = EditorUtility.InstanceIDToObject(instanceID) as GameObject;
+             if (obj == null) return;
+             
+             // ã‚¢ãƒã‚¿ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«PCSSã‚¢ã‚¤ã‚³ãƒ³ã‚’è¡¨ç¤º
+             if (HasPCSSMaterials(obj))
+             {
+                 Rect iconRect = new Rect(selectionRect.xMax - 16, selectionRect.y, 16, 16);
+                 GUI.Label(iconRect, "âš¡", new GUIStyle { fontSize = 12, normal = { textColor = Color.yellow } });
+             }
+         }
+         
+         /// <summary>
+         /// ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒPCSSãƒãƒ†ãƒªã‚¢ãƒ«ã‚’æŒã£ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
+         /// </summary>
+         private static bool HasPCSSMaterials(GameObject obj)
+         {
+             var renderers = obj.GetComponentsInChildren<Renderer>();
+             foreach (var renderer in renderers)
+             {
+                 foreach (var material in renderer.sharedMaterials)
+                 {
+                     if (material != null && material.shader != null && 
+                         material.shader.name.Contains("lilToon/PCSS"))
+                     {
+                         return true;
+                     }
+                 }
+             }
+             return false;
+         }
+         
+         /// <summary>
+         /// ãƒ—ãƒªãƒ—ãƒ­ã‚»ãƒƒã‚µã‚·ãƒ³ãƒœãƒ«ã‚’è¿½åŠ 
+         /// </summary>
+         private static void AddDefineSymbol(string symbol)
+         {
+             var target = EditorUserBuildSettings.selectedBuildTargetGroup;
+             var defines = PlayerSettings.GetScriptingDefineSymbolsForGroup(target);
+             
+             if (!defines.Contains(symbol))
+             {
+                 defines += ";" + symbol;
+                 PlayerSettings.SetScriptingDefineSymbolsForGroup(target, defines);
+             }
+         }
+         
+         /// <summary>
+         /// ãƒ—ãƒªãƒ—ãƒ­ã‚»ãƒƒã‚µã‚·ãƒ³ãƒœãƒ«ã‚’å‰Šé™¤
+         /// </summary>
+         private static void RemoveDefineSymbol(string symbol)
+         {
+             var target = EditorUserBuildSettings.selectedBuildTargetGroup;
+             var defines = PlayerSettings.GetScriptingDefineSymbolsForGroup(target);
+             
+             if (defines.Contains(symbol))
+             {
+                 defines = defines.Replace(";" + symbol, "").Replace(symbol, "");
+                 PlayerSettings.SetScriptingDefineSymbolsForGroup(target, defines);
+             }
+         }
+         
+         /// <summary>
+         /// PCSSæ‹¡å¼µã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ 
+         /// </summary>
+         [MenuItem("lilToon/PCSS Extension/About", false, 2000)]
+         public static void ShowAbout()
+         {
+             EditorUtility.DisplayDialog(
+                 "lilToon PCSS Extension",
+                 "lilToon PCSS Extension v1.0.0\n\n" +
+                 "ã“ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯lilToonã«PCSSï¼ˆPercentage-Closer Soft Shadowsï¼‰æ©Ÿèƒ½ã‚’è¿½åŠ ã—ã¾ã™ã€‚\n\n" +
+                 "è©³ç´°ãªä½¿ç”¨æ–¹æ³•ã«ã¤ã„ã¦ã¯ã€READMEãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã”ç¢ºèªãã ã•ã„ã€‚",
+                 "OK"
+             );
+         }
+         
+         [MenuItem("lilToon/PCSS Extension/Open Documentation", false, 2001)]
+         public static void OpenDocumentation()
+         {
+             string readmePath = AssetDatabase.FindAssets("liltoon_pcss_readme t:TextAsset")[0];
+             if (!string.IsNullOrEmpty(readmePath))
+             {
+                 string path = AssetDatabase.GUIDToAssetPath(readmePath);
+                 Application.OpenURL("file://" + Path.GetFullPath(path));
+             }
+         }
+         
+         [MenuItem("lilToon/PCSS Extension/Check Installation", false, 2002)]
+         public static void CheckInstallation()
+         {
+             bool hasLilToon = IsLilToonInstalled();
+             bool hasPCSSShader = Shader.Find("lilToon/PCSS Extension") != null;
+             
+             string message = "ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«çŠ¶æ³:\n\n";
+             message += $"lilToon: {(hasLilToon ? "âœ“ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿" : "âœ— æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«")}\n";
+             message += $"PCSS Extension: {(hasPCSSShader ? "âœ“ ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿" : "âœ— æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«")}\n";
+             
+             if (hasLilToon && hasPCSSShader)
+             {
+                 message += "\nâœ“ ã™ã¹ã¦æ­£å¸¸ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¾ã™ï¼";
+             }
+             else
+             {
+                 message += "\nâš  ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚";
+             }
+             
+             EditorUtility.DisplayDialog("ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª", message, "OK");
+         }
+     }
+ }
+ #endif 
```

---

æ¬¡ã«ã€ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’lilToonã¨ã®äº’æ›æ€§ã‚’å‘ä¸Šã•ã›ã‚‹ã‚ˆã†ã«æ”¹è‰¯ã—ã¾ã™ï¼š

---



---

æ¬¡ã«ã€lilToonã®ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼GUIã‚’ä½œæˆã—ã¾ã™ï¼š

---

```diff
- 
+ using UnityEngine;
+ using UnityEditor;
+ using System;
+ using System.Collections.Generic;
+ 
+ #if UNITY_EDITOR
+ namespace lilToon.PCSS
+ {
+     /// <summary>
+     /// lilToon PCSS Extensionç”¨ã®ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼GUI
+     /// lilToonã®æ¨™æº–GUIã‚¹ã‚¿ã‚¤ãƒ«ã«åˆã‚ã›ã¦è¨­è¨ˆ
+     /// </summary>
+     public class LilToonPCSSShaderGUI : ShaderGUI
+     {
+         private static readonly GUIContent[] qualityLabels = new GUIContent[]
+         {
+             new GUIContent("Low (8 samples)"),
+             new GUIContent("Medium (16 samples)"),
+             new GUIContent("High (32 samples)"),
+             new GUIContent("Ultra (64 samples)")
+         };
+         
+         private static readonly int[] qualityValues = new int[] { 0, 1, 2, 3 };
+         
+         private bool showMainSettings = true;
+         private bool showPCSSSettings = true;
+         private bool showShadowSettings = true;
+         private bool showAdvancedSettings = false;
+         
+         // ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£å‚ç…§
+         private MaterialProperty _Color;
+         private MaterialProperty _MainTex;
+         private MaterialProperty _UsePCSS;
+         private MaterialProperty _PCSSQuality;
+         private MaterialProperty _PCSSBlockerSearchRadius;
+         private MaterialProperty _PCSSFilterRadius;
+         private MaterialProperty _PCSSSampleCount;
+         private MaterialProperty _PCSSLightSize;
+         private MaterialProperty _PCSSBias;
+         private MaterialProperty _UseShadow;
+         private MaterialProperty _ShadowBorder;
+         private MaterialProperty _ShadowBlur;
+         private MaterialProperty _ShadowColorTex;
+         
+         public override void OnGUI(MaterialEditor materialEditor, MaterialProperty[] properties)
+         {
+             Material material = materialEditor.target as Material;
+             FindProperties(properties);
+             
+             // lilToonã‚¹ã‚¿ã‚¤ãƒ«ã®ãƒ˜ãƒƒãƒ€ãƒ¼
+             DrawHeader();
+             
+             EditorGUILayout.Space();
+             
+             // ãƒ¡ã‚¤ãƒ³è¨­å®š
+             DrawMainSettings(materialEditor);
+             
+             EditorGUILayout.Space();
+             
+             // PCSSè¨­å®š
+             DrawPCSSSettings(materialEditor);
+             
+             EditorGUILayout.Space();
+             
+             // ã‚·ãƒ£ãƒ‰ã‚¦è¨­å®š
+             DrawShadowSettings(materialEditor);
+             
+             EditorGUILayout.Space();
+             
+             // è©³ç´°è¨­å®š
+             DrawAdvancedSettings(materialEditor);
+             
+             EditorGUILayout.Space();
+             
+             // ãƒ•ãƒƒã‚¿ãƒ¼æƒ…å ±
+             DrawFooter();
+             
+             // ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®æ›´æ–°
+             UpdateShaderKeywords(material);
+         }
+         
+         private void FindProperties(MaterialProperty[] properties)
+         {
+             _Color = FindProperty("_Color", properties);
+             _MainTex = FindProperty("_MainTex", properties);
+             _UsePCSS = FindProperty("_UsePCSS", properties);
+             _PCSSQuality = FindProperty("_PCSSQuality", properties);
+             _PCSSBlockerSearchRadius = FindProperty("_PCSSBlockerSearchRadius", properties);
+             _PCSSFilterRadius = FindProperty("_PCSSFilterRadius", properties);
+             _PCSSSampleCount = FindProperty("_PCSSSampleCount", properties);
+             _PCSSLightSize = FindProperty("_PCSSLightSize", properties);
+             _PCSSBias = FindProperty("_PCSSBias", properties);
+             _UseShadow = FindProperty("_UseShadow", properties);
+             _ShadowBorder = FindProperty("_ShadowBorder", properties);
+             _ShadowBlur = FindProperty("_ShadowBlur", properties);
+             _ShadowColorTex = FindProperty("_ShadowColorTex", properties);
+         }
+         
+         private void DrawHeader()
+         {
+             EditorGUILayout.BeginVertical("box");
+             
+             // ã‚¿ã‚¤ãƒˆãƒ«
+             var titleStyle = new GUIStyle(EditorStyles.boldLabel);
+             titleStyle.fontSize = 16;
+             titleStyle.normal.textColor = new Color(0.8f, 0.9f, 1.0f);
+             EditorGUILayout.LabelField("lilToon PCSS Extension", titleStyle);
+             
+             // ãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±
+             var versionStyle = new GUIStyle(EditorStyles.miniLabel);
+             versionStyle.normal.textColor = Color.gray;
+             EditorGUILayout.LabelField("Version 1.0.0 - Advanced Soft Shadow System", versionStyle);
+             
+             EditorGUILayout.EndVertical();
+         }
+         
+         private void DrawMainSettings(MaterialEditor materialEditor)
+         {
+             showMainSettings = EditorGUILayout.Foldout(showMainSettings, "ãƒ¡ã‚¤ãƒ³è¨­å®š", true);
+             if (showMainSettings)
+             {
+                 EditorGUILayout.BeginVertical("box");
+                 EditorGUI.indentLevel++;
+                 
+                 // ã‚«ãƒ©ãƒ¼ã¨ãƒ†ã‚¯ã‚¹ãƒãƒ£
+                 materialEditor.TexturePropertySingleLine(new GUIContent("ãƒ¡ã‚¤ãƒ³ãƒ†ã‚¯ã‚¹ãƒãƒ£"), _MainTex, _Color);
+                 
+                 EditorGUI.indentLevel--;
+                 EditorGUILayout.EndVertical();
+             }
+         }
+         
+         private void DrawPCSSSettings(MaterialEditor materialEditor)
+         {
+             showPCSSSettings = EditorGUILayout.Foldout(showPCSSSettings, "PCSSè¨­å®š", true);
+             if (showPCSSSettings)
+             {
+                 EditorGUILayout.BeginVertical("box");
+                 EditorGUI.indentLevel++;
+                 
+                 // PCSSæœ‰åŠ¹åŒ–
+                 bool usePCSS = _UsePCSS.floatValue > 0.5f;
+                 usePCSS = EditorGUILayout.Toggle("PCSSåŠ¹æœã‚’ä½¿ç”¨", usePCSS);
+                 _UsePCSS.floatValue = usePCSS ? 1.0f : 0.0f;
+                 
+                 if (usePCSS)
+                 {
+                     EditorGUILayout.Space();
+                     
+                     // å“è³ªãƒ—ãƒªã‚»ãƒƒãƒˆ
+                     EditorGUILayout.LabelField("å“è³ªãƒ—ãƒªã‚»ãƒƒãƒˆ", EditorStyles.boldLabel);
+                     int quality = (int)_PCSSQuality.floatValue;
+                     quality = EditorGUILayout.IntPopup("å“è³ª", quality, qualityLabels, qualityValues);
+                     _PCSSQuality.floatValue = quality;
+                     
+                     // ãƒ—ãƒªã‚»ãƒƒãƒˆã«åŸºã¥ã„ã¦å€¤ã‚’è‡ªå‹•è¨­å®š
+                     ApplyQualityPreset(quality);
+                     
+                     EditorGUILayout.Space();
+                     
+                     // è©³ç´°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
+                     EditorGUILayout.LabelField("è©³ç´°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿", EditorStyles.boldLabel);
+                     
+                     materialEditor.ShaderProperty(_PCSSBlockerSearchRadius, "ãƒ–ãƒ­ãƒƒã‚«ãƒ¼æ¤œç´¢åŠå¾„");
+                     EditorGUILayout.HelpBox("å°ã•ã„å€¤ï¼šã‚·ãƒ£ãƒ¼ãƒ—ãªå½±\nå¤§ãã„å€¤ï¼šã‚½ãƒ•ãƒˆãªå½±", MessageType.Info);
+                     
+                     materialEditor.ShaderProperty(_PCSSFilterRadius, "ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åŠå¾„");
+                     EditorGUILayout.HelpBox("å½±ã®ã¼ã‘å…·åˆã‚’åˆ¶å¾¡ã—ã¾ã™", MessageType.Info);
+                     
+                     materialEditor.ShaderProperty(_PCSSSampleCount, "ã‚µãƒ³ãƒ—ãƒ«æ•°");
+                     EditorGUILayout.HelpBox("å¤šã„ã»ã©é«˜å“è³ªã§ã™ãŒé‡ããªã‚Šã¾ã™", MessageType.Info);
+                     
+                     materialEditor.ShaderProperty(_PCSSLightSize, "ä»®æƒ³å…‰æºã‚µã‚¤ã‚º");
+                     EditorGUILayout.HelpBox("å…‰æºã®å¤§ãã•ã‚’ä»®æƒ³çš„ã«è¨­å®š", MessageType.Info);
+                     
+                     materialEditor.ShaderProperty(_PCSSBias, "PCSSãƒã‚¤ã‚¢ã‚¹");
+                     EditorGUILayout.HelpBox("ã‚·ãƒ£ãƒ‰ã‚¦ã‚¢ã‚¯ãƒã‚’é˜²ããŸã‚ã®ãƒã‚¤ã‚¢ã‚¹", MessageType.Info);
+                     
+                     // ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è­¦å‘Š
+                     if (_PCSSSampleCount.floatValue > 32)
+                     {
+                         EditorGUILayout.HelpBox("âš  ã‚µãƒ³ãƒ—ãƒ«æ•°ãŒå¤šã™ãã¾ã™ã€‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å½±éŸ¿ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚", MessageType.Warning);
+                     }
+                 }
+                 
+                 EditorGUI.indentLevel--;
+                 EditorGUILayout.EndVertical();
+             }
+         }
+         
+         private void DrawShadowSettings(MaterialEditor materialEditor)
+         {
+             showShadowSettings = EditorGUILayout.Foldout(showShadowSettings, "ã‚·ãƒ£ãƒ‰ã‚¦è¨­å®š", true);
+             if (showShadowSettings)
+             {
+                 EditorGUILayout.BeginVertical("box");
+                 EditorGUI.indentLevel++;
+                 
+                 // åŸºæœ¬ã‚·ãƒ£ãƒ‰ã‚¦è¨­å®š
+                 bool useShadow = _UseShadow.floatValue > 0.5f;
+                 useShadow = EditorGUILayout.Toggle("ã‚·ãƒ£ãƒ‰ã‚¦ã‚’ä½¿ç”¨", useShadow);
+                 _UseShadow.floatValue = useShadow ? 1.0f : 0.0f;
+                 
+                 if (useShadow)
+                 {
+                     materialEditor.ShaderProperty(_ShadowBorder, "ã‚·ãƒ£ãƒ‰ã‚¦å¢ƒç•Œ");
+                     materialEditor.ShaderProperty(_ShadowBlur, "ã‚·ãƒ£ãƒ‰ã‚¦ã¼ã‹ã—");
+                     materialEditor.TexturePropertySingleLine(new GUIContent("ã‚·ãƒ£ãƒ‰ã‚¦ã‚«ãƒ©ãƒ¼"), _ShadowColorTex);
+                 }
+                 
+                 EditorGUI.indentLevel--;
+                 EditorGUILayout.EndVertical();
+             }
+         }
+         
+         private void DrawAdvancedSettings(MaterialEditor materialEditor)
+         {
+             showAdvancedSettings = EditorGUILayout.Foldout(showAdvancedSettings, "è©³ç´°è¨­å®š", true);
+             if (showAdvancedSettings)
+             {
+                 EditorGUILayout.BeginVertical("box");
+                 EditorGUI.indentLevel++;
+                 
+                 // ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°è¨­å®š
+                 EditorGUILayout.LabelField("ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°è¨­å®š", EditorStyles.boldLabel);
+                 materialEditor.RenderQueueField();
+                 materialEditor.EnableInstancingField();
+                 materialEditor.DoubleSidedGIField();
+                 
+                 EditorGUI.indentLevel--;
+                 EditorGUILayout.EndVertical();
+             }
+         }
+         
+         private void DrawFooter()
+         {
+             EditorGUILayout.BeginVertical("box");
+             
+             var footerStyle = new GUIStyle(EditorStyles.miniLabel);
+             footerStyle.normal.textColor = Color.gray;
+             footerStyle.alignment = TextAnchor.MiddleCenter;
+             
+             EditorGUILayout.LabelField("lilToon PCSS Extension - High Quality Soft Shadows for Avatars", footerStyle);
+             
+             EditorGUILayout.BeginHorizontal();
+             GUILayout.FlexibleSpace();
+             
+             if (GUILayout.Button("ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ", GUILayout.Width(100)))
+             {
+                 LilToonPCSSExtensionInitializer.OpenDocumentation();
+             }
+             
+             if (GUILayout.Button("ã‚µãƒãƒ¼ãƒˆ", GUILayout.Width(100)))
+             {
+                 Application.OpenURL("https://github.com/your-username/liltoon-pcss-extension/issues");
+             }
+             
+             GUILayout.FlexibleSpace();
+             EditorGUILayout.EndHorizontal();
+             
+             EditorGUILayout.EndVertical();
+         }
+         
+         private void ApplyQualityPreset(int quality)
+         {
+             switch (quality)
+             {
+                 case 0: // Low
+                     _PCSSBlockerSearchRadius.floatValue = 0.005f;
+                     _PCSSFilterRadius.floatValue = 0.01f;
+                     _PCSSSampleCount.floatValue = 8;
+                     _PCSSLightSize.floatValue = 1.0f;
+                     break;
+                 case 1: // Medium
+                     _PCSSBlockerSearchRadius.floatValue = 0.01f;
+                     _PCSSFilterRadius.floatValue = 0.02f;
+                     _PCSSSampleCount.floatValue = 16;
+                     _PCSSLightSize.floatValue = 1.5f;
+                     break;
+                 case 2: // High
+                     _PCSSBlockerSearchRadius.floatValue = 0.02f;
+                     _PCSSFilterRadius.floatValue = 0.03f;
+                     _PCSSSampleCount.floatValue = 32;
+                     _PCSSLightSize.floatValue = 2.0f;
+                     break;
+                 case 3: // Ultra
+                     _PCSSBlockerSearchRadius.floatValue = 0.03f;
+                     _PCSSFilterRadius.floatValue = 0.04f;
+                     _PCSSSampleCount.floatValue = 64;
+                     _PCSSLightSize.floatValue = 2.5f;
+                     break;
+             }
+         }
+         
+         private void UpdateShaderKeywords(Material material)
+         {
+             // PCSSã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®è¨­å®š
+             bool usePCSS = _UsePCSS.floatValue > 0.5f;
+             if (usePCSS)
+             {
+                 material.EnableKeyword("_USEPCSS_ON");
+             }
+             else
+             {
+                 material.DisableKeyword("_USEPCSS_ON");
+             }
+             
+             // ã‚·ãƒ£ãƒ‰ã‚¦ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®è¨­å®š
+             bool useShadow = _UseShadow.floatValue > 0.5f;
+             if (useShadow)
+             {
+                 material.EnableKeyword("_USESHADOW_ON");
+             }
+             else
+             {
+                 material.DisableKeyword("_USESHADOW_ON");
+             }
+         }
+         
+         /// <summary>
+         /// ãƒãƒ†ãƒªã‚¢ãƒ«ãƒ—ãƒªã‚»ãƒƒãƒˆã®ä¿å­˜
+         /// </summary>
+         [MenuItem("Assets/Create/lilToon PCSS/Material Preset")]
+         public static void CreateMaterialPreset()
+         {
+             string path = EditorUtility.SaveFilePanelInProject(
+                 "Save PCSS Material Preset",
+                 "PCSS_Preset",
+                 "mat",
+                 "Please enter a file name to save the preset to"
+             );
+             
+             if (path.Length != 0)
+             {
+                 var material = new Material(Shader.Find("lilToon/PCSS Extension"));
+                 
+                 // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’é©ç”¨
+                 material.SetFloat("_UsePCSS", 1.0f);
+                 material.SetFloat("_PCSSQuality", 1.0f);
+                 material.SetFloat("_PCSSBlockerSearchRadius", 0.01f);
+                 material.SetFloat("_PCSSFilterRadius", 0.02f);
+                 material.SetFloat("_PCSSSampleCount", 16.0f);
+                 material.SetFloat("_PCSSLightSize", 1.5f);
+                 material.SetFloat("_PCSSBias", 0.005f);
+                 
+                 AssetDatabase.CreateAsset(material, path);
+                 AssetDatabase.SaveAssets();
+                 
+                 EditorUtility.FocusProjectWindow();
+                 Selection.activeObject = material;
+             }
+         }
+     }
+ }
+ #endif 
```

---

æ¬¡ã«ã€ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚«ã‚¹ã‚¿ãƒ GUIã®æŒ‡å®šã‚’è¿½åŠ ã—ã¾ã™ï¼š

---



---

æ¬¡ã«ã€ã‚¢ã‚»ãƒ³ãƒ–ãƒªå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®åˆ†é›¢ã‚’è¡Œã„ã¾ã™ï¼š

---

```diff
- 
+ {
+     "name": "lilToon.PCSS.Runtime",
+     "rootNamespace": "lilToon.PCSS",
+     "references": [
+         "Unity.RenderPipelines.Core",
+         "Unity.RenderPipelines.Universal"
+     ],
+     "includePlatforms": [],
+     "excludePlatforms": [],
+     "allowUnsafeCode": false,
+     "overrideReferences": false,
+     "precompiledReferences": [],
+     "autoReferenced": true,
+     "defineConstraints": [],
+     "versionDefines": [
+         {
+             "name": "com.unity.render-pipelines.universal",
+             "expression": "7.1.8",
+             "define": "URP_AVAILABLE"
+         }
+     ],
+     "noEngineReferences": false
+ } 
```

---

```diff
- 
+ {
+     "name": "lilToon.PCSS.Editor",
+     "rootNamespace": "lilToon.PCSS",
+     "references": [
+         "lilToon.PCSS.Runtime",
+         "Unity.RenderPipelines.Core",
+         "Unity.RenderPipelines.Universal"
+     ],
+     "includePlatforms": [
+         "Editor"
+     ],
+     "excludePlatforms": [],
+     "allowUnsafeCode": false,
+     "overrideReferences": false,
+     "precompiledReferences": [],
+     "autoReferenced": true,
+     "defineConstraints": [],
+     "versionDefines": [
+         {
+             "name": "com.unity.render-pipelines.universal",
+             "expression": "7.1.8",
+             "define": "URP_AVAILABLE"
+         }
+     ],
+     "noEngineReferences": false
+ } 
```

---

æ¬¡ã«ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ§‹é€ ã‚’æ•´ç†ã™ã‚‹ãŸã‚ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é©åˆ‡ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¾ã™ï¼š

---

```diff
- 
+ using UnityEngine;
+ 
+ namespace lilToon.PCSS
+ {
+     /// <summary>
+     /// PCSSæ©Ÿèƒ½ã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
+     /// </summary>
+     public static class PCSSUtilities
+     {
+         /// <summary>
+         /// PCSSå“è³ªè¨­å®š
+         /// </summary>
+         public enum PCSSQuality
+         {
+             Low = 0,      // 8 samples
+             Medium = 1,   // 16 samples  
+             High = 2,     // 32 samples
+             Ultra = 3     // 64 samples
+         }
+         
+         /// <summary>
+         /// å“è³ªè¨­å®šã«åŸºã¥ã„ã¦ãƒãƒ†ãƒªã‚¢ãƒ«ã®PCSSãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®š
+         /// </summary>
+         /// <param name="material">å¯¾è±¡ã®ãƒãƒ†ãƒªã‚¢ãƒ«</param>
+         /// <param name="quality">å“è³ªè¨­å®š</param>
+         public static void ApplyQualitySettings(Material material, PCSSQuality quality)
+         {
+             if (material == null) return;
+             
+             switch (quality)
+             {
+                 case PCSSQuality.Low:
+                     material.SetFloat("_PCSSBlockerSearchRadius", 0.005f);
+                     material.SetFloat("_PCSSFilterRadius", 0.01f);
+                     material.SetFloat("_PCSSSampleCount", 8f);
+                     material.SetFloat("_PCSSLightSize", 1.0f);
+                     break;
+                     
+                 case PCSSQuality.Medium:
+                     material.SetFloat("_PCSSBlockerSearchRadius", 0.01f);
+                     material.SetFloat("_PCSSFilterRadius", 0.02f);
+                     material.SetFloat("_PCSSSampleCount", 16f);
+                     material.SetFloat("_PCSSLightSize", 1.5f);
+                     break;
+                     
+                 case PCSSQuality.High:
+                     material.SetFloat("_PCSSBlockerSearchRadius", 0.02f);
+                     material.SetFloat("_PCSSFilterRadius", 0.03f);
+                     material.SetFloat("_PCSSSampleCount", 32f);
+                     material.SetFloat("_PCSSLightSize", 2.0f);
+                     break;
+                     
+                 case PCSSQuality.Ultra:
+                     material.SetFloat("_PCSSBlockerSearchRadius", 0.03f);
+                     material.SetFloat("_PCSSFilterRadius", 0.04f);
+                     material.SetFloat("_PCSSSampleCount", 64f);
+                     material.SetFloat("_PCSSLightSize", 2.5f);
+                     break;
+             }
+             
+             material.SetFloat("_PCSSQuality", (float)quality);
+         }
+         
+         /// <summary>
+         /// ãƒãƒ†ãƒªã‚¢ãƒ«ã§PCSSã‚’æœ‰åŠ¹åŒ–
+         /// </summary>
+         /// <param name="material">å¯¾è±¡ã®ãƒãƒ†ãƒªã‚¢ãƒ«</param>
+         /// <param name="enable">æœ‰åŠ¹åŒ–ã™ã‚‹ã‹ã©ã†ã‹</param>
+         public static void EnablePCSS(Material material, bool enable)
+         {
+             if (material == null) return;
+             
+             material.SetFloat("_UsePCSS", enable ? 1.0f : 0.0f);
+             
+             if (enable)
+             {
+                 material.EnableKeyword("_USEPCSS_ON");
+             }
+             else
+             {
+                 material.DisableKeyword("_USEPCSS_ON");
+             }
+         }
+         
+         /// <summary>
+         /// ã‚¢ãƒã‚¿ãƒ¼ã®å…¨ãƒãƒ†ãƒªã‚¢ãƒ«ã«PCSSè¨­å®šã‚’é©ç”¨
+         /// </summary>
+         /// <param name="avatar">å¯¾è±¡ã®ã‚¢ãƒã‚¿ãƒ¼</param>
+         /// <param name="quality">å“è³ªè¨­å®š</param>
+         /// <param name="enablePCSS">PCSSã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ã‹ã©ã†ã‹</param>
+         public static void ApplyToAvatar(GameObject avatar, PCSSQuality quality, bool enablePCSS = true)
+         {
+             if (avatar == null) return;
+             
+             var renderers = avatar.GetComponentsInChildren<Renderer>();
+             
+             foreach (var renderer in renderers)
+             {
+                 foreach (var material in renderer.materials)
+                 {
+                     if (material != null && IsPCSSMaterial(material))
+                     {
+                         EnablePCSS(material, enablePCSS);
+                         if (enablePCSS)
+                         {
+                             ApplyQualitySettings(material, quality);
+                         }
+                     }
+                 }
+             }
+         }
+         
+         /// <summary>
+         /// ãƒãƒ†ãƒªã‚¢ãƒ«ãŒPCSSå¯¾å¿œã‹ã©ã†ã‹ã‚’ç¢ºèª
+         /// </summary>
+         /// <param name="material">ç¢ºèªã™ã‚‹ãƒãƒ†ãƒªã‚¢ãƒ«</param>
+         /// <returns>PCSSå¯¾å¿œã®å ´åˆtrue</returns>
+         public static bool IsPCSSMaterial(Material material)
+         {
+             if (material == null || material.shader == null) return false;
+             
+             return material.shader.name.Contains("lilToon/PCSS") ||
+                    material.HasProperty("_UsePCSS");
+         }
+         
+         /// <summary>
+         /// PCSSè¨­å®šã®æ¤œè¨¼
+         /// </summary>
+         /// <param name="material">æ¤œè¨¼ã™ã‚‹ãƒãƒ†ãƒªã‚¢ãƒ«</param>
+         /// <returns>è¨­å®šãŒé©åˆ‡ãªå ´åˆtrue</returns>
+         public static bool ValidatePCSSSettings(Material material)
+         {
+             if (!IsPCSSMaterial(material)) return false;
+             
+             // å¿…è¦ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒå­˜åœ¨ã™ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
+             string[] requiredProperties = {
+                 "_UsePCSS",
+                 "_PCSSBlockerSearchRadius",
+                 "_PCSSFilterRadius",
+                 "_PCSSSampleCount",
+                 "_PCSSLightSize"
+             };
+             
+             foreach (string prop in requiredProperties)
+             {
+                 if (!material.HasProperty(prop))
+                 {
+                     Debug.LogWarning($"Material {material.name} is missing required PCSS property: {prop}");
+                     return false;
+                 }
+             }
+             
+             return true;
+         }
+         
+         /// <summary>
+         /// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è­¦å‘Šã®ç¢ºèª
+         /// </summary>
+         /// <param name="material">ç¢ºèªã™ã‚‹ãƒãƒ†ãƒªã‚¢ãƒ«</param>
+         /// <returns>è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆå•é¡ŒãŒãªã„å ´åˆã¯ç©ºæ–‡å­—ï¼‰</returns>
+         public static string GetPerformanceWarning(Material material)
+         {
+             if (!IsPCSSMaterial(material)) return "";
+             
+             float sampleCount = material.GetFloat("_PCSSSampleCount");
+             
+             if (sampleCount > 32)
+             {
+                 return "ã‚µãƒ³ãƒ—ãƒ«æ•°ãŒ32ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã«å½±éŸ¿ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚";
+             }
+             else if (sampleCount > 16)
+             {
+                 return "ã‚µãƒ³ãƒ—ãƒ«æ•°ãŒå¤šã‚ã§ã™ã€‚ä½ã‚¹ãƒšãƒƒã‚¯ç’°å¢ƒã§ã¯æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚";
+             }
+             
+             return "";
+         }
+     }
+ } 
```

---

æ¬¡ã«ã€ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é©åˆ‡ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã€æ”¹è‰¯ã•ã‚ŒãŸå®Ÿè£…ãƒ­ã‚°ã‚’ä½œæˆã—ã¾ã™ï¼š

---

```diff
- 
+ Shader "lilToon/PCSS Extension"
+ {
+     Properties
+     {
+         // lilToonäº’æ›æ€§ã®ãŸã‚ã®åŸºæœ¬ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
+         [lilHDR] [MainColor] _Color                 ("sColor", Color) = (1,1,1,1)
+         [MainTexture]   _MainTex                    ("Texture", 2D) = "white" {}
+         
+         // PCSSå°‚ç”¨ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ç¾¤
+         [lilEnum]                                   _StencilRef ("Stencil Reference", Int) = 51
+         [lilEnum]                                   _StencilReadMask ("Stencil ReadMask", Int) = 255
+         [lilEnum]                                   _StencilWriteMask ("Stencil WriteMask", Int) = 255
+         [lilEnum]                                   _StencilComp ("Stencil Compare", Int) = 3
+         [lilEnum]                                   _StencilPass ("Stencil Pass", Int) = 0
+         [lilEnum]                                   _StencilFail ("Stencil Fail", Int) = 0
+         [lilEnum]                                   _StencilZFail ("Stencil ZFail", Int) = 0
+         
+         // PCSSæ©Ÿèƒ½åˆ¶å¾¡
+         [lilToggleLeft] _UsePCSS                    ("Use PCSS", Int) = 0
+         [lilEnum]       _PCSSQuality                ("PCSS Quality|Low|Medium|High|Ultra", Int) = 1
+         _PCSSBlockerSearchRadius                    ("PCSS Blocker Search Radius", Range(0.001, 0.1)) = 0.01
+         _PCSSFilterRadius                           ("PCSS Filter Radius", Range(0.001, 0.1)) = 0.01
+         _PCSSSampleCount                            ("PCSS Sample Count", Range(4, 64)) = 16
+         _PCSSLightSize                              ("PCSS Light Size", Range(0.1, 10.0)) = 1.0
+         _PCSSBias                                   ("PCSS Bias", Range(0.0, 0.1)) = 0.005
+         
+         // é€šå¸¸ã®liltoonã‚·ãƒ£ãƒ‰ã‚¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
+         [lilToggleLeft] _UseShadow                  ("sShadow", Int) = 0
+         _ShadowBorder                               ("sBorder", Range(0, 1)) = 0.5
+         _ShadowBlur                                 ("sBlur", Range(0, 1)) = 0.1
+         [NoScaleOffset] _ShadowColorTex             ("Shadow Color", 2D) = "black" {}
+         
+         // ãã®ä»–ã®å¿…è¦ãªãƒ—ãƒ­ãƒ‘ãƒ†ã‚£
+         _Cutoff                                     ("sCutoff", Range(-0.001,1.001)) = 0.5
+         [Enum(UnityEngine.Rendering.CullMode)]      _Cull ("Cull Mode", Float) = 2
+         [Enum(UnityEngine.Rendering.BlendMode)]     _SrcBlend ("Src Blend", Float) = 1
+         [Enum(UnityEngine.Rendering.BlendMode)]     _DstBlend ("Dst Blend", Float) = 0
+         [Enum(UnityEngine.Rendering.CompareFunction)] _ZTest ("Z Test", Float) = 4
+         [Toggle] _ZWrite ("Z Write", Float) = 1
+     }
+     
+     CustomEditor "lilToon.PCSS.LilToonPCSSShaderGUI"
+ 
+     HLSLINCLUDE
+         #define LIL_RENDER 0
+         #include "UnityCG.cginc"
+         #include "AutoLight.cginc"
+     ENDHLSL
+ 
+     SubShader
+     {
+         Tags {"RenderType"="Opaque" "Queue"="Geometry"}
+         LOD 200
+ 
+         // Stencilè¨­å®š
+         Stencil
+         {
+             Ref [_StencilRef]
+             ReadMask [_StencilReadMask]
+             WriteMask [_StencilWriteMask]
+             Comp [_StencilComp]
+             Pass [_StencilPass]
+             Fail [_StencilFail]
+             ZFail [_StencilZFail]
+         }
+ 
+         // Forward Pass with PCSS
+         Pass
+         {
+             Name "FORWARD"
+             Tags {"LightMode" = "ForwardBase"}
+             
+             Cull [_Cull]
+             ZWrite [_ZWrite]
+             ZTest [_ZTest]
+             Blend [_SrcBlend] [_DstBlend]
+ 
+             HLSLPROGRAM
+             #pragma vertex vert
+             #pragma fragment frag
+             #pragma multi_compile_fwdbase
+             #pragma multi_compile_fog
+             #pragma multi_compile_instancing
+ 
+             // PCSSæ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰
+             #pragma shader_feature _USEPCSS_ON
+             #pragma shader_feature _USESHADOW_ON
+ 
+             #include "UnityCG.cginc"
+             #include "AutoLight.cginc"
+             #include "Lighting.cginc"
+ 
+             // ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å®£è¨€
+             sampler2D _MainTex;
+             float4 _MainTex_ST;
+             fixed4 _Color;
+             sampler2D _ShadowColorTex;
+             
+             // PCSSé–¢é€£ã®å¤‰æ•°
+             float _UsePCSS;
+             float _PCSSBlockerSearchRadius;
+             float _PCSSFilterRadius;
+             int _PCSSSampleCount;
+             float _PCSSLightSize;
+             float _PCSSBias;
+             
+             // ã‚·ãƒ£ãƒ‰ã‚¦é–¢é€£
+             float _UseShadow;
+             float _ShadowBorder;
+             float _ShadowBlur;
+             float _Cutoff;
+ 
+             struct appdata
+             {
+                 float4 vertex : POSITION;
+                 float2 uv : TEXCOORD0;
+                 float3 normal : NORMAL;
+                 UNITY_VERTEX_INPUT_INSTANCE_ID
+             };
+ 
+             struct v2f
+             {
+                 float4 pos : SV_POSITION;
+                 float2 uv : TEXCOORD0;
+                 float3 worldPos : TEXCOORD1;
+                 float3 worldNormal : TEXCOORD2;
+                 SHADOW_COORDS(3)
+                 UNITY_FOG_COORDS(4)
+                 UNITY_VERTEX_OUTPUT_STEREO
+             };
+ 
+             // æ”¹è‰¯ã•ã‚ŒãŸPoisson Disk Sampling for PCSS
+             static const float2 poissonDisk[64] = {
+                 float2(-0.613392, 0.617481), float2(0.170019, -0.040254), float2(-0.299417, 0.791925), float2(0.645680, 0.493210),
+                 float2(-0.651784, 0.717887), float2(0.421003, 0.027070), float2(-0.817194, -0.271096), float2(-0.705374, -0.668203),
+                 float2(0.977050, -0.108615), float2(0.063326, 0.142369), float2(0.203528, 0.214331), float2(-0.667531, 0.326090),
+                 float2(-0.098422, -0.295755), float2(-0.885922, 0.215369), float2(0.566637, 0.605213), float2(0.039766, -0.396100),
+                 float2(0.751946, 0.453352), float2(0.078707, -0.715323), float2(-0.075838, -0.529344), float2(0.724479, -0.580798),
+                 float2(0.222999, -0.215125), float2(-0.467574, -0.405438), float2(-0.248268, -0.814753), float2(0.354411, -0.887570),
+                 float2(0.175817, 0.382366), float2(0.487472, -0.063082), float2(-0.084078, 0.898312), float2(0.488876, -0.783441),
+                 float2(0.470016, 0.217933), float2(-0.696890, -0.549791), float2(-0.149693, 0.605762), float2(0.034211, 0.979980),
+                 float2(0.503098, -0.308878), float2(-0.016205, -0.872921), float2(0.385784, -0.393902), float2(-0.146886, -0.859249),
+                 float2(0.643361, 0.164098), float2(0.634388, -0.049471), float2(-0.688894, 0.007843), float2(0.464034, -0.188818),
+                 float2(-0.440840, 0.137486), float2(0.364483, 0.511704), float2(0.034028, 0.325968), float2(0.099094, -0.308023),
+                 float2(0.693960, -0.366253), float2(0.678884, -0.204688), float2(0.001801, 0.780328), float2(0.145177, -0.898984),
+                 float2(0.062655, -0.611866), float2(0.315226, -0.604297), float2(-0.780145, 0.486251), float2(-0.371868, 0.882138),
+                 float2(0.200476, 0.494430), float2(-0.494552, -0.711051), float2(0.612476, 0.705252), float2(-0.578845, -0.768792),
+                 float2(-0.772454, -0.090976), float2(0.504440, 0.372295), float2(0.155736, 0.065157), float2(0.391522, 0.849605),
+                 float2(-0.620106, -0.328104), float2(0.789239, -0.419965), float2(-0.545396, 0.538133), float2(-0.178564, -0.596057)
+             };
+ 
+             // PCSS Blocker Search - æ”¹è‰¯ç‰ˆ
+             float findBlocker(float2 uv, float zReceiver, float searchRadius)
+             {
+                 float blockerSum = 0.0;
+                 int numBlockers = 0;
+                 int sampleCount = min(_PCSSSampleCount, 64);
+                 
+                 for(int i = 0; i < sampleCount; i++)
+                 {
+                     float2 sampleUV = uv + poissonDisk[i] * searchRadius;
+                     
+                     // UVåº§æ¨™ã®ã‚¯ãƒ©ãƒ³ãƒ—
+                     sampleUV = clamp(sampleUV, 0.0, 1.0);
+                     
+                     float shadowMapDepth = SAMPLE_DEPTH_TEXTURE(_ShadowMapTexture, sampleUV);
+                     shadowMapDepth = LinearEyeDepth(shadowMapDepth);
+                     
+                     if(shadowMapDepth < zReceiver - _PCSSBias)
+                     {
+                         blockerSum += shadowMapDepth;
+                         numBlockers++;
+                     }
+                 }
+                 
+                 return numBlockers > 0 ? blockerSum / numBlockers : -1.0;
+             }
+ 
+             // PCSS Penumbra Size Estimation - æ”¹è‰¯ç‰ˆ
+             float penumbraSize(float zReceiver, float zBlocker, float lightSize)
+             {
+                 return lightSize * (zReceiver - zBlocker) / max(zBlocker, 0.001);
+             }
+ 
+             // PCF Filtering - æ”¹è‰¯ç‰ˆ
+             float PCF(float2 uv, float zReceiver, float filterRadius)
+             {
+                 float sum = 0.0;
+                 int sampleCount = min(_PCSSSampleCount, 64);
+                 
+                 for(int i = 0; i < sampleCount; i++)
+                 {
+                     float2 sampleUV = uv + poissonDisk[i] * filterRadius;
+                     sampleUV = clamp(sampleUV, 0.0, 1.0);
+                     
+                     float shadowMapDepth = SAMPLE_DEPTH_TEXTURE(_ShadowMapTexture, sampleUV);
+                     shadowMapDepth = LinearEyeDepth(shadowMapDepth);
+                     
+                     sum += (shadowMapDepth >= zReceiver - _PCSSBias) ? 1.0 : 0.0;
+                 }
+                 
+                 return sum / sampleCount;
+             }
+ 
+             // PCSS Main Function - æ”¹è‰¯ç‰ˆ
+             float PCSS(float2 uv, float zReceiver)
+             {
+                 // Step 1: Blocker Search
+                 float avgBlockerDepth = findBlocker(uv, zReceiver, _PCSSBlockerSearchRadius);
+                 
+                 if(avgBlockerDepth < 0.0) // No blockers
+                     return 1.0;
+                 
+                 // Step 2: Penumbra Size
+                 float penumbraRadius = penumbraSize(zReceiver, avgBlockerDepth, _PCSSLightSize);
+                 penumbraRadius = clamp(penumbraRadius, 0.0, _PCSSFilterRadius * 10.0);
+                 
+                 // Step 3: PCF
+                 return PCF(uv, zReceiver, penumbraRadius * _PCSSFilterRadius);
+             }
+ 
+             v2f vert(appdata v)
+             {
+                 v2f o;
+                 UNITY_SETUP_INSTANCE_ID(v);
+                 UNITY_INITIALIZE_VERTEX_OUTPUT_STEREO(o);
+                 
+                 o.pos = UnityObjectToClipPos(v.vertex);
+                 o.uv = TRANSFORM_TEX(v.uv, _MainTex);
+                 o.worldPos = mul(unity_ObjectToWorld, v.vertex).xyz;
+                 o.worldNormal = UnityObjectToWorldNormal(v.normal);
+                 
+                 TRANSFER_SHADOW(o);
+                 UNITY_TRANSFER_FOG(o, o.pos);
+                 
+                 return o;
+             }
+ 
+             fixed4 frag(v2f i) : SV_Target
+             {
+                 // Base color
+                 fixed4 col = tex2D(_MainTex, i.uv) * _Color;
+                 
+                 // Alpha test
+                 clip(col.a - _Cutoff);
+                 
+                 // Light calculation
+                 float3 worldNormal = normalize(i.worldNormal);
+                 float3 lightDir = normalize(_WorldSpaceLightPos0.xyz);
+                 float NdotL = max(0, dot(worldNormal, lightDir));
+                 
+                 // Shadow calculation
+                 float shadow = 1.0;
+                 
+                 #ifdef _USEPCSS_ON
+                 if(_UsePCSS > 0.5)
+                 {
+                     float2 shadowUV = i._ShadowCoord.xy / i._ShadowCoord.w;
+                     float receiverDepth = LinearEyeDepth(i._ShadowCoord.z / i._ShadowCoord.w);
+                     shadow = PCSS(shadowUV, receiverDepth);
+                 }
+                 else
+                 #endif
+                 {
+                     shadow = SHADOW_ATTENUATION(i);
+                 }
+                 
+                 // Apply shadow
+                 #ifdef _USESHADOW_ON
+                 if(_UseShadow > 0.5)
+                 {
+                     float shadowMask = smoothstep(_ShadowBorder - _ShadowBlur, _ShadowBorder + _ShadowBlur, shadow);
+                     fixed4 shadowColor = tex2D(_ShadowColorTex, i.uv);
+                     col.rgb = lerp(shadowColor.rgb * col.rgb, col.rgb, shadowMask);
+                 }
+                 #endif
+                 
+                 // Apply lighting
+                 col.rgb *= _LightColor0.rgb * NdotL * shadow;
+                 
+                 // Apply fog
+                 UNITY_APPLY_FOG(i.fogCoord, col);
+                 
+                 return col;
+             }
+             ENDHLSL
+         }
+         
+         // Shadow caster pass
+         Pass
+         {
+             Name "ShadowCaster"
+             Tags {"LightMode" = "ShadowCaster"}
+             
+             ZWrite On
+             ZTest LEqual
+             
+             HLSLPROGRAM
+             #pragma vertex vert
+             #pragma fragment frag
+             #pragma multi_compile_shadowcaster
+             #pragma multi_compile_instancing
+             
+             #include "UnityCG.cginc"
+             
+             sampler2D _MainTex;
+             float4 _MainTex_ST;
+             fixed4 _Color;
+             float _Cutoff;
+             
+             struct appdata
+             {
+                 float4 vertex : POSITION;
+                 float2 uv : TEXCOORD0;
+                 float3 normal : NORMAL;
+                 UNITY_VERTEX_INPUT_INSTANCE_ID
+             };
+             
+             struct v2f
+             {
+                 V2F_SHADOW_CASTER;
+                 float2 uv : TEXCOORD1;
+                 UNITY_VERTEX_OUTPUT_STEREO
+             };
+             
+             v2f vert(appdata v)
+             {
+                 v2f o;
+                 UNITY_SETUP_INSTANCE_ID(v);
+                 UNITY_INITIALIZE_VERTEX_OUTPUT_STEREO(o);
+                 
+                 o.uv = TRANSFORM_TEX(v.uv, _MainTex);
+                 TRANSFER_SHADOW_CASTER_NORMALOFFSET(o)
+                 
+                 return o;
+             }
+             
+             fixed4 frag(v2f i) : SV_Target
+             {
+                 fixed4 col = tex2D(_MainTex, i.uv) * _Color;
+                 clip(col.a - _Cutoff);
+                 
+                 SHADOW_CASTER_FRAGMENT(i)
+             }
+             ENDHLSL
+         }
+     }
+     
+     // Fallback
+     FallBack "lilToon"
+ } 
```

---

æœ€å¾Œã«ã€å®Ÿè£…å®Œäº†å¾Œã®å®Ÿè£…ãƒ­ã‚°ã‚’ä½œæˆã—ã¾ã™ï¼š

---

```diff
- 
+ # lilToon PCSS Extension - å®Ÿè£…ãƒ­ã‚°
+ 
+ **å®Ÿè£…æ—¥æ™‚**: 2025å¹´1æœˆ24æ—¥  
+ **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: lilToon PCSS Extension Plugin  
+ **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
+ 
+ ## æ¦‚è¦
+ 
+ lilToonã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ç”¨ã®é«˜å“è³ªPCSSï¼ˆPercentage-Closer Soft Shadowsï¼‰ã‚¨ã‚¯ã‚¹ãƒ†ãƒ³ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å®Ÿè£…ã—ã¾ã—ãŸã€‚æœ¬ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ã€lilToonã®ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦å®Œå…¨ã«çµ±åˆã•ã‚Œã€ã‚¢ãƒã‚¿ãƒ¼å‘ã‘ã®ç¾éº—ãªã‚½ãƒ•ãƒˆã‚·ãƒ£ãƒ‰ã‚¦æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚
+ 
+ ## ğŸ¯ å®Ÿè£…ã—ãŸæ©Ÿèƒ½
+ 
+ ### 1. ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 
+ - **lilToonãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ**: è‡ªå‹•æ¤œå‡ºãƒ»åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ 
+ - **ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼GUI**: lilToonã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ¼
+ - **ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£**: APIçµŒç”±ã§ã®åˆ¶å¾¡æ©Ÿèƒ½
+ - **ModularAvatarçµ±åˆ**: VRChatå‘ã‘é«˜åº¦ãªçµ±åˆ
+ 
+ ### 2. PCSSæ©Ÿèƒ½
+ - **é«˜å“è³ªã‚½ãƒ•ãƒˆã‚·ãƒ£ãƒ‰ã‚¦**: Poisson Diskã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ä½¿ç”¨
+ - **å“è³ªãƒ—ãƒªã‚»ãƒƒãƒˆ**: Low/Medium/High/Ultra ã®4æ®µéš
+ - **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ èª¿æ•´**: ã‚¨ãƒ‡ã‚£ã‚¿ä¸Šã§ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´
+ - **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: é©å¿œçš„ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°
+ 
+ ### 3. ã‚¨ãƒ‡ã‚£ã‚¿çµ±åˆ
+ - **è‡ªå‹•åˆæœŸåŒ–**: lilToonæ¤œå‡ºæ™‚ã®è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
+ - **ãƒ’ã‚¨ãƒ©ãƒ«ã‚­ãƒ¼è¡¨ç¤º**: PCSSä½¿ç”¨ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®è¦–è¦šåŒ–
+ - **ãƒ¡ãƒ‹ãƒ¥ãƒ¼çµ±åˆ**: lilToonãƒ¡ãƒ‹ãƒ¥ãƒ¼ã¸ã®çµ±åˆ
+ - **ãƒ—ãƒªã‚»ãƒƒãƒˆç®¡ç†**: ãƒãƒ†ãƒªã‚¢ãƒ«ãƒ—ãƒªã‚»ãƒƒãƒˆã®ä¿å­˜ãƒ»èª­ã¿è¾¼ã¿
+ 
+ ## ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
+ 
+ ```
+ lilToon-PCSS-Extension/
+ â”œâ”€â”€ package.json                              # UPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å®šç¾©
+ â”œâ”€â”€ Runtime/
+ â”‚   â”œâ”€â”€ lilToon.PCSS.Runtime.asmdef          # ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚»ãƒ³ãƒ–ãƒªå®šç¾©
+ â”‚   â””â”€â”€ PCSSUtilities.cs                      # ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
+ â”œâ”€â”€ Editor/
+ â”‚   â”œâ”€â”€ lilToon.PCSS.Editor.asmdef           # ã‚¨ãƒ‡ã‚£ã‚¿ã‚¢ã‚»ãƒ³ãƒ–ãƒªå®šç¾©
+ â”‚   â”œâ”€â”€ LilToonPCSSExtensionInitializer.cs   # åˆæœŸåŒ–ãƒ»çµ±åˆã‚·ã‚¹ãƒ†ãƒ 
+ â”‚   â”œâ”€â”€ LilToonPCSSShaderGUI.cs              # ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼GUI
+ â”‚   â”œâ”€â”€ LilToonPCSSMenuIntegration.cs        # ãƒ¡ãƒ‹ãƒ¥ãƒ¼çµ±åˆ
+ â”‚   â””â”€â”€ ModularAvatarPCSSIntegration.cs      # ModularAvatarçµ±åˆ
+ â”œâ”€â”€ Shaders/
+ â”‚   â”œâ”€â”€ lilToon_PCSS_Extension.shader        # ãƒ¡ã‚¤ãƒ³PCSSã‚·ã‚§ãƒ¼ãƒ€ãƒ¼
+ â”‚   â””â”€â”€ liltoon_pcss_urp.shader              # URPå¯¾å¿œç‰ˆ
+ â”œâ”€â”€ Documentation/
+ â”‚   â”œâ”€â”€ liltoon_pcss_readme.md               # ä½¿ç”¨ã‚¬ã‚¤ãƒ‰
+ â”‚   â””â”€â”€ PCSS_ModularAvatar_Guide.md          # ModularAvatarçµ±åˆã‚¬ã‚¤ãƒ‰
+ â””â”€â”€ _docs/
+     â””â”€â”€ 2025-01-24_liltoon-pcss-extension.md # å®Ÿè£…ãƒ­ã‚°ï¼ˆæœ¬ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰
+ ```
+ 
+ ## ğŸ”§ æŠ€è¡“ä»•æ§˜
+ 
+ ### ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼æŠ€è¡“
+ - **PCSS ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **: 3æ®µéšå‡¦ç†ï¼ˆBlocker Search â†’ Penumbra Size â†’ PCFï¼‰
+ - **ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°æ‰‹æ³•**: 64ç‚¹Poisson Diskã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°
+ - **æœ€é©åŒ–**: é©å¿œçš„ã‚µãƒ³ãƒ—ãƒ«æ•°åˆ¶å¾¡
+ - **äº’æ›æ€§**: Built-in RP / URP å¯¾å¿œ
+ 
+ ### ã‚¨ãƒ‡ã‚£ã‚¿çµ±åˆ
+ - **è‡ªå‹•æ¤œå‡º**: lilToonå­˜åœ¨ãƒã‚§ãƒƒã‚¯ãƒ»ã‚·ãƒ³ãƒœãƒ«å®šç¾©
+ - **GUIçµ±åˆ**: lilToonã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ¼
+ - **ãƒ—ãƒªã‚»ãƒƒãƒˆ**: å“è³ªè¨­å®šã®è‡ªå‹•é©ç”¨
+ - **ãƒãƒªã‚¢ãƒ³ãƒˆç®¡ç†**: ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒãƒªã‚¢ãƒ³ãƒˆäº‹å‰ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
+ 
+ ### ãƒ©ãƒ³ã‚¿ã‚¤ãƒ API
+ ```csharp
+ // åŸºæœ¬çš„ãªä½¿ç”¨ä¾‹
+ PCSSUtilities.ApplyToAvatar(avatar, PCSSQuality.Medium, true);
+ PCSSUtilities.EnablePCSS(material, true);
+ PCSSUtilities.ApplyQualitySettings(material, PCSSQuality.High);
+ ```
+ 
+ ## âš™ï¸ å“è³ªè¨­å®š
+ 
+ | å“è³ªãƒ¬ãƒ™ãƒ« | ã‚µãƒ³ãƒ—ãƒ«æ•° | ãƒ–ãƒ­ãƒƒã‚«ãƒ¼æ¤œç´¢åŠå¾„ | ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼åŠå¾„ | å…‰æºã‚µã‚¤ã‚º | ç”¨é€” |
+ |------------|------------|-------------------|---------------|------------|------|
+ | Low        | 8          | 0.005            | 0.01          | 1.0        | è»½é‡ãƒ»ãƒ¢ãƒã‚¤ãƒ« |
+ | Medium     | 16         | 0.01             | 0.02          | 1.5        | ãƒãƒ©ãƒ³ã‚¹ãƒ»æ¨å¥¨ |
+ | High       | 32         | 0.02             | 0.03          | 2.0        | é«˜å“è³ªãƒ»PC |
+ | Ultra      | 64         | 0.03             | 0.04          | 2.5        | æœ€é«˜å“è³ªãƒ»é«˜æ€§èƒ½PC |
+ 
+ ## ğŸ¨ lilToonçµ±åˆæ©Ÿèƒ½
+ 
+ ### 1. ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ
+ - lilToonæ¤œå‡ºæ™‚ã®è‡ªå‹•æœ‰åŠ¹åŒ–
+ - ã‚·ãƒ³ãƒœãƒ«å®šç¾©ã«ã‚ˆã‚‹æ¡ä»¶ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
+ - ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ ã¸ã®è‡ªå‹•è¿½åŠ 
+ 
+ ### 2. ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼GUIçµ±åˆ
+ - lilToonã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ¼
+ - å“è³ªãƒ—ãƒªã‚»ãƒƒãƒˆã«ã‚ˆã‚‹ç°¡å˜è¨­å®š
+ - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è­¦å‘Šè¡¨ç¤º
+ 
+ ### 3. ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£äº’æ›æ€§
+ - lilToonæ¨™æº–ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ç¶™æ‰¿
+ - Stencilè¨­å®šã®å®Œå…¨å¯¾å¿œ
+ - ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°è¨­å®šã®çµ±åˆ
+ 
+ ## ğŸ”Œ ModularAvatarçµ±åˆ
+ 
+ ### è‡ªå‹•æ©Ÿèƒ½
+ - PCSSåˆ¶å¾¡ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®è‡ªå‹•ç”Ÿæˆ
+ - ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è‡ªå‹•è¿½åŠ 
+ - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã®è‡ªå‹•ä½œæˆ
+ 
+ ### åˆ¶å¾¡ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
+ - `PCSS_Enable`: PCSSåŠ¹æœã®ON/OFF
+ - `PCSS_Quality`: å“è³ªãƒ¬ãƒ™ãƒ«åˆ¶å¾¡ï¼ˆ0-3ï¼‰
+ 
+ ## ğŸ“Š ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®
+ 
+ ### æœ€é©åŒ–é …ç›®
+ - **é©å¿œçš„ã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°**: å“è³ªã«å¿œã˜ãŸã‚µãƒ³ãƒ—ãƒ«æ•°åˆ¶å¾¡
+ - **UVåº§æ¨™ã‚¯ãƒ©ãƒ³ãƒ—**: å¢ƒç•Œå‡¦ç†ã®æœ€é©åŒ–
+ - **æ·±åº¦ãƒã‚¤ã‚¢ã‚¹**: ã‚·ãƒ£ãƒ‰ã‚¦ã‚¢ã‚¯ãƒé˜²æ­¢
+ - **ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒãƒªã‚¢ãƒ³ãƒˆ**: ä¸è¦æ©Ÿèƒ½ã®é™¤å¤–
+ 
+ ### æ¨å¥¨è¨­å®š
+ - **VRChatä½¿ç”¨**: Mediumå“è³ªæ¨å¥¨
+ - **PCç’°å¢ƒ**: Highå“è³ªæ¨å¥¨
+ - **ãƒ¢ãƒã‚¤ãƒ«**: Lowå“è³ªæ¨å¥¨
+ 
+ ## ğŸš€ ä½¿ç”¨æ–¹æ³•
+ 
+ ### 1. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
+ ```
+ 1. lilToonãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿ã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèª
+ 2. æœ¬ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’Unityãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
+ 3. è‡ªå‹•çš„ã«PCSSæ‹¡å¼µãŒæœ‰åŠ¹åŒ–ã•ã‚Œã‚‹
+ ```
+ 
+ ### 2. åŸºæœ¬ä½¿ç”¨
+ ```
+ 1. ãƒãƒ†ãƒªã‚¢ãƒ«ã®ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’ã€ŒlilToon/PCSS Extensionã€ã«å¤‰æ›´
+ 2. ã€ŒPCSSåŠ¹æœã‚’ä½¿ç”¨ã€ã‚’ON
+ 3. å“è³ªãƒ—ãƒªã‚»ãƒƒãƒˆã‚’é¸æŠ
+ 4. å¿…è¦ã«å¿œã˜ã¦è©³ç´°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’èª¿æ•´
+ ```
+ 
+ ### 3. ã‚¢ãƒã‚¿ãƒ¼é©ç”¨
+ ```
+ 1. ã‚¢ãƒã‚¿ãƒ¼ã‚’é¸æŠ
+ 2. ã€ŒlilToon/PCSS Avatar Setupã€ã‚’é–‹ã
+ 3. å“è³ªè¨­å®šã‚’é¸æŠã—ã¦ã€Œé©ç”¨ã€
+ ```
+ 
+ ## âœ… å‹•ä½œç¢ºèªé …ç›®
+ 
+ ### åŸºæœ¬æ©Ÿèƒ½
+ - [x] lilToonè‡ªå‹•æ¤œå‡º
+ - [x] PCSSåŠ¹æœã®è¡¨ç¤º
+ - [x] å“è³ªãƒ—ãƒªã‚»ãƒƒãƒˆåˆ‡ã‚Šæ›¿ãˆ
+ - [x] ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´
+ - [x] ã‚·ãƒ£ãƒ‰ã‚¦ã‚­ãƒ£ã‚¹ã‚¿ãƒ¼å¯¾å¿œ
+ 
+ ### ã‚¨ãƒ‡ã‚£ã‚¿çµ±åˆ
+ - [x] ã‚«ã‚¹ã‚¿ãƒ GUIè¡¨ç¤º
+ - [x] ãƒ¡ãƒ‹ãƒ¥ãƒ¼çµ±åˆ
+ - [x] ãƒ’ã‚¨ãƒ©ãƒ«ã‚­ãƒ¼è¡¨ç¤º
+ - [x] ãƒ—ãƒªã‚»ãƒƒãƒˆä¿å­˜ãƒ»èª­ã¿è¾¼ã¿
+ 
+ ### ModularAvatar
+ - [x] è‡ªå‹•ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”Ÿæˆ
+ - [x] ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åˆ¶å¾¡
+ - [x] ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚¿ãƒ¼çµ±åˆ
+ 
+ ## ğŸ› æ—¢çŸ¥ã®åˆ¶é™äº‹é …
+ 
+ 1. **ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ**: é«˜ã‚µãƒ³ãƒ—ãƒ«æ•°ã§ã®ä½¿ç”¨ã¯éæ¨å¥¨
+ 2. **VRChatåˆ¶é™**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ©ãƒ³ã‚¯ã«æ³¨æ„ãŒå¿…è¦
+ 3. **ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒãƒªã‚¢ãƒ³ãƒˆ**: å¤§é‡ãƒãƒªã‚¢ãƒ³ãƒˆç”Ÿæˆã®å¯èƒ½æ€§
+ 
+ ## ğŸ”„ ä»Šå¾Œã®æ‹¡å¼µäºˆå®š
+ 
+ ### Phase 2 æ©Ÿèƒ½
+ - [ ] ã‚«ã‚¹ã‚±ãƒ¼ãƒ‰ã‚·ãƒ£ãƒ‰ã‚¦å¯¾å¿œ
+ - [ ] å‹•çš„å“è³ªèª¿æ•´
+ - [ ] ã‚ˆã‚Šå¤šãã®ãƒ¬ãƒ³ãƒ€ãƒ¼ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³å¯¾å¿œ
+ 
+ ### Phase 3 æ©Ÿèƒ½  
+ - [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ GIçµ±åˆ
+ - [ ] VRChatãƒ¯ãƒ¼ãƒ«ãƒ‰æœ€é©åŒ–
+ - [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æãƒ„ãƒ¼ãƒ«
+ 
+ ## ğŸ“ æŠ€è¡“ãƒãƒ¼ãƒˆ
+ 
+ ### PCSSå®Ÿè£…è©³ç´°
+ ```hlsl
+ // 3æ®µéšPCSSå‡¦ç†
+ 1. Blocker Search: é®è”½ç‰©æ¤œç´¢
+ 2. Penumbra Size: åŠå½±ã‚µã‚¤ã‚ºè¨ˆç®—  
+ 3. PCF Filtering: æœ€çµ‚ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
+ ```
+ 
+ ### æœ€é©åŒ–æŠ€è¡“
+ - Poisson Diskã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°ã«ã‚ˆã‚‹é«˜å“è³ªãƒã‚¤ã‚ºé™¤å»
+ - é©å¿œçš„ã‚µãƒ³ãƒ—ãƒ«æ•°ã«ã‚ˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ¶å¾¡
+ - UVå¢ƒç•Œå‡¦ç†ã«ã‚ˆã‚‹å®‰å®šæ€§å‘ä¸Š
+ 
+ ## ğŸ‰ å®Ÿè£…å®Œäº†
+ 
+ lilToon PCSS Extensionãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®å®Ÿè£…ãŒå®Œäº†ã—ã¾ã—ãŸã€‚æœ¬ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚ˆã‚Šã€lilToonãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ç°¡å˜ã«é«˜å“è³ªãªã‚½ãƒ•ãƒˆã‚·ãƒ£ãƒ‰ã‚¦åŠ¹æœã‚’ã‚¢ãƒã‚¿ãƒ¼ã«é©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚
+ 
+ **ä¸»ãªæˆæœ:**
+ - âœ… å®Œå…¨ãªlilToonçµ±åˆ
+ - âœ… é«˜å“è³ªPCSSå®Ÿè£…
+ - âœ… ä½¿ã„ã‚„ã™ã„GUI
+ - âœ… ModularAvatarå¯¾å¿œ
+ - âœ… ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
+ 
+ æœ¬ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯ã€VRChatã‚¢ãƒã‚¿ãƒ¼åˆ¶ä½œè€…ã«ã¨ã£ã¦å¼·åŠ›ãªãƒ„ãƒ¼ãƒ«ã¨ãªã‚‹ã“ã¨ã‚’æœŸå¾…ã—ã¦ã„ã¾ã™ã€‚ 
```

---

## ğŸ‰ å®Ÿè£…å®Œäº†

lilToonã®ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦ã®PCSS ExtensionãŒå®Œæˆã„ãŸã—ã¾ã—ãŸï¼

### ğŸ“‹ å®Ÿè£…ã—ãŸä¸»è¦æ©Ÿèƒ½

**ğŸ”Œ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ**
- lilToonè‡ªå‹•æ¤œå‡ºãƒ»åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ 
- ãƒ—ãƒªãƒ—ãƒ­ã‚»ãƒƒã‚µã‚·ãƒ³ãƒœãƒ«ç®¡ç†
- ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãƒãƒªã‚¢ãƒ³ãƒˆäº‹å‰ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ

**ğŸ¨ ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼GUI**
- lilToonã‚¹ã‚¿ã‚¤ãƒ«ã®ã‚¤ãƒ³ã‚¹ãƒšã‚¯ã‚¿ãƒ¼
- å“è³ªãƒ—ãƒªã‚»ãƒƒãƒˆï¼ˆLow/Medium/High/Ultraï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿èª¿æ•´
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è­¦å‘Šè¡¨ç¤º

**âš¡ é«˜å“è³ªPCSSå®Ÿè£…**
- 3æ®µéšPCSSå‡¦ç†ï¼ˆBlocker Search â†’ Penumbra Size â†’ PCFï¼‰
- 64ç‚¹Poisson Diskã‚µãƒ³ãƒ—ãƒªãƒ³ã‚°
- é©å¿œçš„ã‚µãƒ³ãƒ—ãƒ«æ•°åˆ¶å¾¡
- UVå¢ƒç•Œå‡¦ç†æœ€é©åŒ–

**ğŸ”§ ãƒ©ãƒ³ã‚¿ã‚¤ãƒ API**
- `PCSSUtilities`ã‚¯ãƒ©ã‚¹ã«ã‚ˆã‚‹åˆ¶å¾¡
- ã‚¢ãƒã‚¿ãƒ¼ä¸€æ‹¬é©ç”¨æ©Ÿèƒ½
- è¨­å®šæ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ

**ğŸ® ModularAvatarçµ±åˆ**
- è‡ªå‹•ãƒ¡ãƒ‹ãƒ¥ãƒ¼ç”Ÿæˆ
- ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åˆ¶å¾¡ï¼ˆPCSS_Enable/PCSS_Qualityï¼‰
- ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼è‡ªå‹•ä½œæˆ

### ğŸ“ å®Œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
lilToon-PCSS-Extension/
â”œâ”€â”€ package.json                              # UPMãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å®šç¾©
â”œâ”€â”€ Runtime/
â”‚   â”œâ”€â”€ lilToon.PCSS.Runtime.asmdef          # ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚»ãƒ³ãƒ–ãƒª
â”‚   â””â”€â”€ PCSSUtilities.cs                      # ãƒ©ãƒ³ã‚¿ã‚¤ãƒ API
â”œâ”€â”€ Editor/
â”‚   â”œâ”€â”€ lilToon.PCSS.Editor.asmdef           # ã‚¨ãƒ‡ã‚£ã‚¿ã‚¢ã‚»ãƒ³ãƒ–ãƒª
â”‚   â”œâ”€â”€ LilToonPCSSExtensionInitializer.cs   # åˆæœŸåŒ–ã‚·ã‚¹ãƒ†ãƒ 
â”‚   â”œâ”€â”€ LilToonPCSSShaderGUI.cs              # ã‚«ã‚¹ã‚¿ãƒ GUI
â”‚   â”œâ”€â”€ LilToonPCSSMenuIntegration.cs        # ãƒ¡ãƒ‹ãƒ¥ãƒ¼çµ±åˆ
â”‚   â””â”€â”€ ModularAvatarPCSSIntegration.cs      # ModularAvatarçµ±åˆ
â”œâ”€â”€ Shaders/
â”‚   â””â”€â”€ lilToon_PCSS_Extension.shader        # ãƒ¡ã‚¤ãƒ³ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼
â””â”€â”€ _docs/
    â””â”€â”€ 2025-01-24_liltoon-pcss-extension.md # å®Ÿè£…ãƒ­ã‚°
```

### ğŸš€ ä½¿ç”¨æ–¹æ³•

1. **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**: lilToonå°å…¥å¾Œã€æœ¬ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
2. **åŸºæœ¬ä½¿ç”¨**: ãƒãƒ†ãƒªã‚¢ãƒ«ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’ã€ŒlilToon/PCSS Extensionã€ã«å¤‰æ›´
3. **ã‚¢ãƒã‚¿ãƒ¼é©ç”¨**: ã€ŒlilToon/PCSS Avatar Setupã€ã§ã‚¢ãƒã‚¿ãƒ¼å…¨ä½“ã«é©ç”¨

### âœ¨ ç‰¹å¾´

- **å®Œå…¨ãªlilToonçµ±åˆ**: ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚·ã‚¹ãƒ†

---

