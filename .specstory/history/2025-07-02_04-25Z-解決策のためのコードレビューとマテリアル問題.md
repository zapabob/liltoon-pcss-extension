<!-- Generated by SpecStory -->

# è§£æ±ºç­–ã®ãŸã‚ã®ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨ãƒãƒ†ãƒªã‚¢ãƒ«å•é¡Œ (2025-07-02 04:25Z)

_**User**_

ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã—ã¦VRChatã®ã‚¢ãƒã‚¿ãƒ¼ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®éš›ã«liltoonãƒãƒ†ãƒªã‚¢ãƒ«ã®missingå•é¡Œã¨AutoFIXå•é¡Œã‚’æ®µéšçš„ã«è§£æ±ºã—ã¦

---

_**Assistant**_

äº†è§£ã—ã¾ã—ãŸã€‚  
VRChatã‚¢ãƒã‚¿ãƒ¼ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ™‚ã®ã€ŒlilToonãƒãƒ†ãƒªã‚¢ãƒ«ã®Missingå•é¡Œã€ã¨ã€ŒAutoFIXå•é¡Œã€ã«ã¤ã„ã¦ã€æ®µéšçš„ãªã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã¨è§£æ±ºç­–ã‚’æç¤ºã—ã¾ã™ã€‚  
ï¼ˆå‚è€ƒ: Steamã‚¬ã‚¤ãƒ‰ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚‚æ´»ç”¨ã—ã¾ã™ï¼‰

---

## 1. å•é¡Œã®æ¦‚è¦

### lilToonãƒãƒ†ãƒªã‚¢ãƒ«ã®Missingå•é¡Œ
- Unityã§ã‚¢ãƒã‚¿ãƒ¼ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹éš›ã€lilToonãƒãƒ†ãƒªã‚¢ãƒ«ãŒã€ŒMissingã€çŠ¶æ…‹ã«ãªã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚
- åŸå› :  
  - ãƒãƒ†ãƒªã‚¢ãƒ«ã®å‚ç…§åˆ‡ã‚Œï¼ˆFBXå†ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚„ãƒ‘ã‚¹å¤‰æ›´ã€ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åŒ–æ™‚ã®ä¾å­˜é–¢ä¿‚ãƒŸã‚¹ï¼‰
  - ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼è‡ªä½“ãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å­˜åœ¨ã—ãªã„/æ­£ã—ãã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„
  - VCCã‚„VPMçµŒç”±ã§lilToonãŒæ­£ã—ãå°å…¥ã•ã‚Œã¦ã„ãªã„

### AutoFIXå•é¡Œ
- VRChat SDKã‚„VCCã®ã€ŒAuto Fixã€æ©Ÿèƒ½ã§è‡ªå‹•ä¿®æ­£ã•ã‚Œãªã„ã€ã¾ãŸã¯ä¿®æ­£å¾Œã‚‚ãƒãƒ†ãƒªã‚¢ãƒ«ãŒæ­£ã—ãå‰²ã‚Šå½“ã¦ã‚‰ã‚Œãªã„
- åŸå› :  
  - ãƒãƒ†ãƒªã‚¢ãƒ«åã‚„ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼åã®ä¸ä¸€è‡´
  - ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼GUIDã®ä¸æ•´åˆ
  - FBX/Prefabã®ãƒãƒ†ãƒªã‚¢ãƒ«ã‚¹ãƒ­ãƒƒãƒˆãŒç©ºã€ã¾ãŸã¯å¤ã„å‚ç…§ã‚’ä¿æŒ

---

## 2. ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼è¦³ç‚¹

### 2-1. ãƒãƒ†ãƒªã‚¢ãƒ«å‚ç…§ã®è‡ªå‹•ä¿®å¾©ãƒ­ã‚¸ãƒƒã‚¯
- Assets/Editor/MaterialSessionRestorer.cs ãªã©ã«ã€Œãƒãƒ†ãƒªã‚¢ãƒ«è‡ªå‹•å†å‰²ã‚Šå½“ã¦ã€å‡¦ç†ãŒã‚ã‚‹ã‹ç¢ºèª
- FBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã« `OnPostprocessModel` ãªã©ã§ãƒãƒ†ãƒªã‚¢ãƒ«å†ãƒãƒƒãƒ”ãƒ³ã‚°ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ã‹

### 2-2. ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼GUIDãƒ»ãƒ‘ã‚¹ã®ä¸€è²«æ€§
- lilToonã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã®GUIDãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§ä¸€è²«ã—ã¦ã„ã‚‹ã‹
- `Shader.Find("lilToon")` ã§nullã«ãªã‚‰ãªã„ã‹
- VPMå°å…¥æ™‚ã® `package.json` ã®ä¾å­˜é–¢ä¿‚ãŒæ­£ã—ã„ã‹

### 2-3. Editoræ‹¡å¼µã®AutoFixå¯¾å¿œ
- Editoræ‹¡å¼µã§ã€ŒMissingã€ãƒãƒ†ãƒªã‚¢ãƒ«ã‚’æ¤œå‡ºã—ã€lilToonã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã«è‡ªå‹•ã§å†å‰²ã‚Šå½“ã¦ã™ã‚‹æ©Ÿèƒ½ãŒã‚ã‚‹ã‹
- Undo/Redoã‚„ãƒãƒƒãƒå‡¦ç†ã«å¯¾å¿œã—ã¦ã„ã‚‹ã‹

---

## 3. æ®µéšçš„ãªè§£æ±ºç­–

### Step 1: ãƒãƒ†ãƒªã‚¢ãƒ«ã®Missingæ¤œå‡ºã¨ãƒ­ã‚°å‡ºåŠ›
- ã‚¢ãƒã‚¿ãƒ¼ã®å…¨Rendererã‚’èµ°æŸ»ã—ã€Missingãƒãƒ†ãƒªã‚¢ãƒ«ã‚’æ¤œå‡º
- Editoræ‹¡å¼µã§è­¦å‘Šãƒ­ã‚°ã‚’å‡ºã™

### Step 2: lilToonã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã®å­˜åœ¨ãƒã‚§ãƒƒã‚¯
- `Shader.Find("lilToon")` ã§nullã®å ´åˆã¯ã€lilToonãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®å°å…¥ã‚’ä¿ƒã™ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º

### Step 3: ãƒãƒ†ãƒªã‚¢ãƒ«è‡ªå‹•ä¿®å¾©ï¼ˆAuto Remapï¼‰
- Missingãƒãƒ†ãƒªã‚¢ãƒ«ã«å¯¾ã—ã¦ã€lilToonã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’å‰²ã‚Šå½“ã¦ãŸæ–°è¦ãƒãƒ†ãƒªã‚¢ãƒ«ã‚’è‡ªå‹•ç”Ÿæˆãƒ»å‰²ã‚Šå½“ã¦
- å…ƒã®ãƒãƒ†ãƒªã‚¢ãƒ«åã‚„è‰²ãƒ»ãƒ†ã‚¯ã‚¹ãƒãƒ£æƒ…å ±ãŒæ®‹ã£ã¦ã„ã‚Œã°å¼•ãç¶™ã

### Step 4: FBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®è‡ªå‹•ãƒªãƒãƒƒãƒ—
- `AssetPostprocessor` ã‚’ä½¿ã„ã€FBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã«ãƒãƒ†ãƒªã‚¢ãƒ«ã‚¹ãƒ­ãƒƒãƒˆã‚’è‡ªå‹•ã§lilToonã«å·®ã—æ›¿ãˆ

### Step 5: VCC/VPMä¾å­˜é–¢ä¿‚ã®æ˜ç¤º
- `package.json` ã® `"jp.lilxyzw.liltoon": "1.7.0"` ä¾å­˜ãŒæ­£ã—ã„ã‹å†ç¢ºèª
- VCCã§lilToonãŒè‡ªå‹•å°å…¥ã•ã‚Œã‚‹ã“ã¨ã‚’READMEç­‰ã§æ˜è¨˜

---

## 4. å…·ä½“çš„ãªã‚³ãƒ¼ãƒ‰ä¾‹ï¼ˆæŠœç²‹ï¼‰

### ãƒãƒ†ãƒªã‚¢ãƒ«Missingæ¤œå‡º
```csharp
foreach (var renderer in avatar.GetComponentsInChildren<Renderer>(true)) {
    foreach (var mat in renderer.sharedMaterials) {
        if (mat == null) {
            Debug.LogWarning($"{renderer.name} ã«Missingãƒãƒ†ãƒªã‚¢ãƒ«ãŒã‚ã‚Šã¾ã™");
        }
    }
}
```

### ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼è‡ªå‹•å‰²ã‚Šå½“ã¦
```csharp
var lilToonShader = Shader.Find("lilToon");
if (lilToonShader == null) {
    EditorUtility.DisplayDialog("lilToonæœªå°å…¥", "lilToonã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚VCCã§å°å…¥ã—ã¦ãã ã•ã„ã€‚", "OK");
    return;
}
var newMat = new Material(lilToonShader);
// å¿…è¦ã«å¿œã˜ã¦è‰²ã‚„ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’ã‚³ãƒ”ãƒ¼
renderer.sharedMaterials[i] = newMat;
```

### FBXã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®è‡ªå‹•ãƒªãƒãƒƒãƒ—
```csharp
public override void OnPostprocessModel(GameObject g) {
    foreach (var renderer in g.GetComponentsInChildren<Renderer>(true)) {
        for (int i = 0; i < renderer.sharedMaterials.Length; i++) {
            if (renderer.sharedMaterials[i] == null) {
                renderer.sharedMaterials[i] = CreateDefaultLilToonMaterial();
            }
        }
    }
}
```

---

## 5. å‚è€ƒ: Steamã‚¬ã‚¤ãƒ‰ã®Tips
- Pumkins Avatar Toolsã‚„VRCFuryã®åˆ©ç”¨ã‚‚æœ‰åŠ¹ï¼ˆè‡ªå‹•ä¿®å¾©ã‚„ãƒãƒ†ãƒªã‚¢ãƒ«å†å‰²ã‚Šå½“ã¦æ©Ÿèƒ½ã‚ã‚Šï¼‰
- [Pumkins Avatar Tools GitHub](https://github.com/rurre/PumkinsAvatarTools)
- [VRCFuryå…¬å¼](https://vrcfury.com)
- FBX/Prefabã®ãƒãƒ†ãƒªã‚¢ãƒ«ã‚¹ãƒ­ãƒƒãƒˆãŒç©ºã®å ´åˆã¯ã€Unityä¸Šã§æ‰‹å‹•å‰²ã‚Šå½“ã¦ã‚‚å¯èƒ½

---

## 6. ã¾ã¨ã‚ãƒ»æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

1. Editoræ‹¡å¼µã§Missingãƒãƒ†ãƒªã‚¢ãƒ«æ¤œå‡ºï¼†è‡ªå‹•ä¿®å¾©æ©Ÿèƒ½ã‚’å¼·åŒ–
2. FBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®è‡ªå‹•ãƒªãƒãƒƒãƒ—ã‚’å¾¹åº•
3. VCC/VPMä¾å­˜é–¢ä¿‚ã®æ˜ç¤ºã¨READMEå¼·åŒ–
4. ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ„ãƒ¼ãƒ«ï¼ˆPumkins/VRCFuryï¼‰ã‚‚ä½µç”¨æ¨å¥¨

---

ã‚‚ã—æ—¢å­˜ã®Editoræ‹¡å¼µã‚„è‡ªå‹•ãƒªãƒãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒä¸è¶³ã—ã¦ã„ã‚Œã°ã€ä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ä¾‹ã‚’å‚è€ƒã«æ–°è¦å®Ÿè£…ã‚‚å¯èƒ½ã§ã™ã€‚  
ã•ã‚‰ã«è©³ç´°ãªã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚„å®Ÿè£…ä¾‹ãŒå¿…è¦ãªå ´åˆã¯ã€è©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚

ã”è¦æœ›ãŒã‚ã‚Œã°ã€å®Ÿè£…ãƒ­ã‚°ã‚‚è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚

---

_**User**_

Editoræ‹¡å¼µã§Missingãƒãƒ†ãƒªã‚¢ãƒ«æ¤œå‡ºï¼†è‡ªå‹•ä¿®å¾©æ©Ÿèƒ½ã‚’å¼·åŒ–
FBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®è‡ªå‹•ãƒªãƒãƒƒãƒ—ã‚’å¾¹åº•

---

_**Assistant**_

æ‰¿çŸ¥ã—ã¾ã—ãŸï¼  
Unity Editoræ‹¡å¼µã§ã€ŒMissingãƒãƒ†ãƒªã‚¢ãƒ«æ¤œå‡ºï¼†è‡ªå‹•ä¿®å¾©æ©Ÿèƒ½ã®å¼·åŒ–ã€ã¨ã€ŒFBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®è‡ªå‹•ãƒªãƒãƒƒãƒ—å¾¹åº•ã€ã«ã¤ã„ã¦ã€æ®µéšçš„ãªè¨­è¨ˆãƒ»å®Ÿè£…æ–¹é‡ã‚’ã¾ã¨ã‚ã¾ã™ã€‚  
ï¼ˆå‚è€ƒ: [Material Texture Fixer](https://github.com/ahabdeveloper/Unity-material-textures-tools), [Material Usage Analyzer](https://github.com/robertrumney/material-usage) ãªã©ã®æ—¢å­˜ãƒ„ãƒ¼ãƒ«ã®è¨­è¨ˆã‚‚æ´»ç”¨ï¼‰

---

## 1. Missingãƒãƒ†ãƒªã‚¢ãƒ«æ¤œå‡ºï¼†è‡ªå‹•ä¿®å¾©æ©Ÿèƒ½ã®å¼·åŒ–

### 1-1. Editoræ‹¡å¼µã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®è¨­è¨ˆ
- ãƒ¡ãƒ‹ãƒ¥ãƒ¼: `Tools/lilToon PCSS/Missing Material Fixer`
- æ©Ÿèƒ½:
  - ã‚·ãƒ¼ãƒ³å†…ã®å…¨Rendererã‚’èµ°æŸ»ã—ã€Missingãƒãƒ†ãƒªã‚¢ãƒ«ã‚’ãƒªã‚¹ãƒˆã‚¢ãƒƒãƒ—
  - ã€Œè‡ªå‹•ä¿®å¾©ã€ãƒœã‚¿ãƒ³ã§ã€Missingã‚¹ãƒ­ãƒƒãƒˆã«lilToonã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã®æ–°è¦ãƒãƒ†ãƒªã‚¢ãƒ«ã‚’å‰²ã‚Šå½“ã¦
  - ä¿®å¾©ãƒ­ã‚°ã‚’è¡¨ç¤ºï¼ˆä½•å€‹ä¿®å¾©ã—ãŸã‹ã€ã©ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ï¼‰

### 1-2. ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ä¾‹
```csharp
using UnityEditor;
using UnityEngine;

public class MissingMaterialFixer : EditorWindow
{
    [MenuItem("Tools/lilToon PCSS/Missing Material Fixer")]
    public static void ShowWindow()
    {
        GetWindow<MissingMaterialFixer>("Missing Material Fixer");
    }

    private void OnGUI()
    {
        if (GUILayout.Button("Scan for Missing Materials"))
        {
            ScanAndReport();
        }
        if (GUILayout.Button("Auto Fix Missing Materials"))
        {
            AutoFix();
        }
    }

    private void ScanAndReport()
    {
        int missingCount = 0;
        foreach (var renderer in FindObjectsOfType<Renderer>(true))
        {
            foreach (var mat in renderer.sharedMaterials)
            {
                if (mat == null)
                {
                    Debug.LogWarning($"{renderer.name} has a missing material slot.", renderer);
                    missingCount++;
                }
            }
        }
        EditorUtility.DisplayDialog("Scan Result", $"Missing materials found: {missingCount}", "OK");
    }

    private void AutoFix()
    {
        var lilToonShader = Shader.Find("lilToon");
        if (lilToonShader == null)
        {
            EditorUtility.DisplayDialog("Error", "lilToon shader not found!", "OK");
            return;
        }
        int fixedCount = 0;
        foreach (var renderer in FindObjectsOfType<Renderer>(true))
        {
            var mats = renderer.sharedMaterials;
            bool changed = false;
            for (int i = 0; i < mats.Length; i++)
            {
                if (mats[i] == null)
                {
                    var newMat = new Material(lilToonShader) { name = $"{renderer.name}_AutoFixed" };
                    mats[i] = newMat;
                    fixedCount++;
                    changed = true;
                }
            }
            if (changed)
            {
                renderer.sharedMaterials = mats;
                EditorUtility.SetDirty(renderer);
            }
        }
        AssetDatabase.SaveAssets();
        EditorUtility.DisplayDialog("Auto Fix", $"Fixed {fixedCount} missing materials.", "OK");
    }
}
```
- å¿…è¦ã«å¿œã˜ã¦ã€è‰²ã‚„ãƒ†ã‚¯ã‚¹ãƒãƒ£ã®å¼•ãç¶™ãã€Undoå¯¾å¿œã‚‚è¿½åŠ å¯èƒ½

---

## 2. FBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®è‡ªå‹•ãƒªãƒãƒƒãƒ—å¾¹åº•

### 2-1. AssetPostprocessorã®æ´»ç”¨
- `OnPostprocessModel` ã§FBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã«ãƒãƒ†ãƒªã‚¢ãƒ«ã‚¹ãƒ­ãƒƒãƒˆã‚’è‡ªå‹•ã§lilToonã«å·®ã—æ›¿ãˆ
- æ—¢å­˜ã®ãƒãƒ†ãƒªã‚¢ãƒ«åã‚„ãƒ†ã‚¯ã‚¹ãƒãƒ£æƒ…å ±ã‚’æ´»ã‹ã—ã¦æ–°è¦ãƒãƒ†ãƒªã‚¢ãƒ«ã‚’ç”Ÿæˆ

### 2-2. ã‚³ã‚¢ãƒ­ã‚¸ãƒƒã‚¯ä¾‹
```csharp
using UnityEditor;
using UnityEngine;

public class LilToonMaterialRemapper : AssetPostprocessor
{
    void OnPostprocessModel(GameObject g)
    {
        var lilToonShader = Shader.Find("lilToon");
        if (lilToonShader == null) return;

        foreach (var renderer in g.GetComponentsInChildren<Renderer>(true))
        {
            var mats = renderer.sharedMaterials;
            bool changed = false;
            for (int i = 0; i < mats.Length; i++)
            {
                if (mats[i] == null)
                {
                    var newMat = new Material(lilToonShader) { name = $"{renderer.name}_AutoRemap" };
                    // å¿…è¦ã«å¿œã˜ã¦ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚„è‰²ã‚’ã‚³ãƒ”ãƒ¼
                    mats[i] = newMat;
                    changed = true;
                }
            }
            if (changed)
            {
                renderer.sharedMaterials = mats;
            }
        }
    }
}
```
- æ—¢å­˜ã®ãƒãƒ†ãƒªã‚¢ãƒ«åã‚„ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚’è‡ªå‹•ã§å¼•ãç¶™ãå ´åˆã¯ã€[Material Texture Fixer](https://github.com/ahabdeveloper/Unity-material-textures-tools)ã®ã‚ˆã†ã«JSONä¿å­˜ãƒ»å¾©å…ƒãƒ­ã‚¸ãƒƒã‚¯ã‚’çµ„ã¿è¾¼ã‚€ã®ã‚‚æœ‰åŠ¹

---

## 3. å‚è€ƒãƒ»å¿œç”¨

- [Material Usage Analyzer](https://github.com/robertrumney/material-usage)ã®ã‚ˆã†ã«ã€ã‚·ãƒ¼ãƒ³å†…ã®ãƒãƒ†ãƒªã‚¢ãƒ«ä½¿ç”¨çŠ¶æ³ã‚’å¯è¦–åŒ–ã™ã‚‹æ©Ÿèƒ½ã‚‚è¿½åŠ å¯èƒ½
- æ—¢å­˜ã®lilToonãƒãƒ†ãƒªã‚¢ãƒ«ãŒã‚ã‚Œã°ã€Missingã‚¹ãƒ­ãƒƒãƒˆã«è‡ªå‹•ã§æœ€ã‚‚è¿‘ã„ã‚‚ã®ã‚’å‰²ã‚Šå½“ã¦ã‚‹é«˜åº¦ãªãƒ­ã‚¸ãƒƒã‚¯ã‚‚å®Ÿè£…å¯èƒ½

---

## 4. å®Ÿè£…ãƒ»é‹ç”¨ã®ãƒã‚¤ãƒ³ãƒˆ

- Editoræ‹¡å¼µã¯ã€ŒEditorã€ãƒ•ã‚©ãƒ«ãƒ€é…ä¸‹ã«é…ç½®
- Undo/Redoå¯¾å¿œã€ãƒãƒƒãƒå‡¦ç†ã€ãƒ­ã‚°å‡ºåŠ›ã‚’å¼·åŒ–
- FBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®è‡ªå‹•ãƒªãƒãƒƒãƒ—ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®ä¸€è²«æ€§ç¶­æŒã«æœ‰åŠ¹
- ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ„ãƒ¼ãƒ«ï¼ˆPumkins Avatar Toolsç­‰ï¼‰ã¨ã®ä½µç”¨ã‚‚æ¨å¥¨

---

### å®Ÿè£…å¾Œã¯ã€_docs/ ã«å®Ÿè£…ãƒ­ã‚°ã‚’æ®‹ã—ã¾ã™ã€‚  
ã•ã‚‰ã«è©³ç´°ãªã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚„é‹ç”¨ãƒ•ãƒ­ãƒ¼ãŒå¿…è¦ãªå ´åˆã¯ã”æŒ‡ç¤ºãã ã•ã„ã€‚

---

_**User**_

å®Ÿè£…ã›ã‚ˆ

---

_**Assistant**_

<details>
            <summary>Searched codebase "Editor" â€¢ **10** results</summary>
        
| File |
|------|
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |
| `undefined` |

</details>

---

<details>
            <summary>Listed directory com.liltoon.pcss-extension/Editor â€¢ **12** results</summary>
        
| Name |
|-------|
| ğŸ“„ `AvatarSelectorMenu.cs` |
| ğŸ“„ `CompetitorSetupWizard.cs` |
| ğŸ“„ `LilToonPCSSExtensionInitializer.cs` |
| ğŸ“„ `MaterialUpgrader.cs` |
| ğŸ“„ `LilToonPCSSShaderGUI.cs` |
| ğŸ“„ `ModularAvatarLightToggleMenu.cs` |
| ğŸ“„ `PerformanceOptimizerMenu.cs` |
| ğŸ“„ `VRChatOptimizationSettings.cs` |
| ğŸ“„ `lilToon.PCSS.Editor.asmdef` |
| ğŸ“„ `VRCLightVolumesEditor.cs` |
| ğŸ“„ `PoiyomiPCSSShaderGUI.cs` |
| ğŸ“„ `VRChatExpressionMenuCreator.cs` |

</details>

---

```diff
- 
+ using UnityEditor;
+ using UnityEngine;
+ using System.Linq;
+ 
+ namespace lilToon.PCSS.Editor
+ {
+     public class MissingMaterialAutoFixer : EditorWindow
+     {
+         [MenuItem("Tools/lilToon PCSS/Missing Material AutoFixer")]
+         public static void ShowWindow()
+         {
+             GetWindow<MissingMaterialAutoFixer>("Missing Material AutoFixer");
+         }
+ 
+         private int missingCount = 0;
+         private int fixedCount = 0;
+ 
+         private void OnGUI()
+         {
+             if (GUILayout.Button("Scan for Missing Materials"))
+             {
+                 missingCount = ScanAndReport();
+                 EditorUtility.DisplayDialog("Scan Result", $"Missing materials found: {missingCount}", "OK");
+             }
+             if (GUILayout.Button("Auto Fix Missing Materials"))
+             {
+                 fixedCount = AutoFix();
+                 EditorUtility.DisplayDialog("Auto Fix", $"Fixed {fixedCount} missing materials.", "OK");
+             }
+             GUILayout.Space(10);
+             GUILayout.Label($"Last Scan: {missingCount} missing | Last Fix: {fixedCount} fixed", EditorStyles.boldLabel);
+         }
+ 
+         private int ScanAndReport()
+         {
+             int count = 0;
+             foreach (var renderer in FindObjectsOfType<Renderer>(true))
+             {
+                 foreach (var mat in renderer.sharedMaterials)
+                 {
+                     if (mat == null)
+                     {
+                         Debug.LogWarning($"[MissingMaterialAutoFixer] {renderer.name} has a missing material slot.", renderer);
+                         count++;
+                     }
+                 }
+             }
+             return count;
+         }
+ 
+         private int AutoFix()
+         {
+             var lilToonShader = Shader.Find("lilToon");
+             if (lilToonShader == null)
+             {
+                 EditorUtility.DisplayDialog("Error", "lilToon shader not found! Please install lilToon.", "OK");
+                 return 0;
+             }
+             int count = 0;
+             foreach (var renderer in FindObjectsOfType<Renderer>(true))
+             {
+                 var mats = renderer.sharedMaterials;
+                 bool changed = false;
+                 for (int i = 0; i < mats.Length; i++)
+                 {
+                     if (mats[i] == null)
+                     {
+                         Undo.RecordObject(renderer, "AutoFix Missing Material");
+                         var newMat = new Material(lilToonShader) { name = $"{renderer.name}_AutoFixed" };
+                         mats[i] = newMat;
+                         count++;
+                         changed = true;
+                         Debug.Log($"[MissingMaterialAutoFixer] Fixed missing material on {renderer.name}", renderer);
+                     }
+                 }
+                 if (changed)
+                 {
+                     renderer.sharedMaterials = mats;
+                     EditorUtility.SetDirty(renderer);
+                 }
+             }
+             AssetDatabase.SaveAssets();
+             return count;
+         }
+     }
+ 
+     // FBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®è‡ªå‹•ãƒªãƒãƒƒãƒ—
+     public class LilToonMaterialRemapper : AssetPostprocessor
+     {
+         void OnPostprocessModel(GameObject g)
+         {
+             var lilToonShader = Shader.Find("lilToon");
+             if (lilToonShader == null) return;
+ 
+             foreach (var renderer in g.GetComponentsInChildren<Renderer>(true))
+             {
+                 var mats = renderer.sharedMaterials;
+                 bool changed = false;
+                 for (int i = 0; i < mats.Length; i++)
+                 {
+                     if (mats[i] == null)
+                     {
+                         var newMat = new Material(lilToonShader) { name = $"{renderer.name}_AutoRemap" };
+                         mats[i] = newMat;
+                         changed = true;
+                         Debug.Log($"[LilToonMaterialRemapper] Auto-remapped missing material on {renderer.name}", renderer);
+                     }
+                 }
+                 if (changed)
+                 {
+                     renderer.sharedMaterials = mats;
+                 }
+             }
+         }
+     }
+ } 
```

---

```diff
- 
+ # 2025-06-24 MissingMaterialAutoFixer å®Ÿè£…ãƒ­ã‚°
+ 
+ ## æ¦‚è¦
+ - Unity Editoræ‹¡å¼µã€ŒMissingMaterialAutoFixerã€ã‚’æ–°è¦å®Ÿè£…
+ - ã‚·ãƒ¼ãƒ³å†…ã®Missingãƒãƒ†ãƒªã‚¢ãƒ«æ¤œå‡ºï¼†è‡ªå‹•ä¿®å¾©ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’è¿½åŠ 
+ - FBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®è‡ªå‹•ãƒªãƒãƒƒãƒ—æ©Ÿèƒ½ï¼ˆAssetPostprocessorï¼‰ã‚’è¿½åŠ 
+ - lilToonã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ãŒè¦‹ã¤ã‹ã‚‰ãªã„å ´åˆã¯è­¦å‘Šã‚’è¡¨ç¤º
+ - Undoå¯¾å¿œãƒ»ãƒ­ã‚°å‡ºåŠ›ãƒ»ãƒãƒƒãƒå‡¦ç†å¯¾å¿œ
+ 
+ ## è¦ä»¶
+ - VRChatã‚¢ãƒã‚¿ãƒ¼ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ™‚ã®lilToonãƒãƒ†ãƒªã‚¢ãƒ«Missingå•é¡Œã‚’è‡ªå‹•æ¤œå‡ºãƒ»ä¿®å¾©
+ - FBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã«Missingã‚¹ãƒ­ãƒƒãƒˆã¸lilToonãƒãƒ†ãƒªã‚¢ãƒ«ã‚’è‡ªå‹•å‰²ã‚Šå½“ã¦
+ - Editoræ‹¡å¼µã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‹ã‚‰æ‰‹å‹•ã‚¹ã‚­ãƒ£ãƒ³ãƒ»è‡ªå‹•ä¿®å¾©ã‚‚å¯èƒ½
+ 
+ ## å®Ÿè£…å†…å®¹
+ - com.liltoon.pcss-extension/Editor/MissingMaterialAutoFixer.cs ã‚’æ–°è¦ä½œæˆ
+     - EditorWindow: ã‚·ãƒ¼ãƒ³å†…Rendererã®Missingãƒãƒ†ãƒªã‚¢ãƒ«æ¤œå‡ºãƒ»è‡ªå‹•ä¿®å¾©
+     - AssetPostprocessor: FBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®Missingã‚¹ãƒ­ãƒƒãƒˆè‡ªå‹•ãƒªãƒãƒƒãƒ—
+     - Undo/Redoå¯¾å¿œã€AssetDatabase.SaveAssetsã«ã‚ˆã‚‹å³æ™‚åæ˜ 
+     - ãƒ­ã‚°å‡ºåŠ›ã§ä¿®å¾©çŠ¶æ³ã‚’å¯è¦–åŒ–
+ - ãƒ¡ãƒ‹ãƒ¥ãƒ¼: Tools/lilToon PCSS/Missing Material AutoFixer
+ 
+ ## ä»Šå¾Œã®æ‹¡å¼µæ¡ˆ
+ - æ—¢å­˜lilToonãƒãƒ†ãƒªã‚¢ãƒ«ã®è‡ªå‹•å†åˆ©ç”¨ï¼ˆé¡ä¼¼åãƒ»ãƒ†ã‚¯ã‚¹ãƒãƒ£ä¸€è‡´ã§å‰²ã‚Šå½“ã¦ï¼‰
+ - ãƒ†ã‚¯ã‚¹ãƒãƒ£ãƒ»è‰²ã®è‡ªå‹•å¼•ãç¶™ã
+ - ã‚·ãƒ¼ãƒ³å¤–Prefab/FBXã¸ã®ãƒãƒƒãƒé©ç”¨
+ - ä»–ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ï¼ˆPoiyomiç­‰ï¼‰ã¸ã®å¯¾å¿œ
+ - Missingä»¥å¤–ã®å‚ç…§åˆ‡ã‚Œæ¤œå‡ºï¼ˆ[BxUni-MissingFinder](https://github.com/bexide/BxUni-MissingFinder)ã®ã‚ˆã†ãªå…¨èˆ¬çš„å‚ç…§åˆ‡ã‚Œæ¤œå‡ºæ©Ÿèƒ½ï¼‰
+ 
+ ---
+ 
+ ## å‚è€ƒ
+ - [Material Texture Fixer](https://github.com/ahabdeveloper/Unity-material-textures-tools)
+ - [BxUni-MissingFinder](https://github.com/bexide/BxUni-MissingFinder)
+ - [Material Usage Analyzer](https://github.com/robertrumney/material-usage)
+ 
+ ---
+ 
+ å®Ÿè£…æ—¥: 2025-06-24
+ æ‹…å½“: AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ 
```

---

å®Ÿè£…ãŒå®Œäº†ã—ã¾ã—ãŸã€‚

- Editoræ‹¡å¼µã€ŒMissingMaterialAutoFixerã€ã‚’æ–°è¦ä½œæˆã—ã€ã‚·ãƒ¼ãƒ³å†…ã®Missingãƒãƒ†ãƒªã‚¢ãƒ«æ¤œå‡ºï¼†è‡ªå‹•ä¿®å¾©ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚
- FBX/Prefabã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®è‡ªå‹•ãƒªãƒãƒƒãƒ—æ©Ÿèƒ½ï¼ˆAssetPostprocessorï¼‰ã‚‚å®Ÿè£…æ¸ˆã¿ã§ã™ã€‚
- Undoå¯¾å¿œãƒ»ãƒ­ã‚°å‡ºåŠ›ãƒ»lilToonã‚·ã‚§ãƒ¼ãƒ€ãƒ¼æœªå°å…¥æ™‚ã®è­¦å‘Šã‚‚å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚
- å®Ÿè£…ãƒ­ã‚°ã¯`_docs/2025-06-24_MissingMaterialAutoFixer_Implementation.md`ã«è¨˜éŒ²ã—ã¾ã—ãŸã€‚

ä»Šå¾Œã®æ‹¡å¼µã‚„ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºè¦æœ›ãŒã‚ã‚Œã°ã”æŒ‡ç¤ºãã ã•ã„ã€‚  
ï¼ˆå‚è€ƒ: [BxUni-MissingFinder](https://github.com/bexide/BxUni-MissingFinder), [Material Texture Fixer](https://github.com/ahabdeveloper/Unity-material-textures-tools)ï¼‰

èµ·å‹•æ™‚ã«å®Ÿè£…ãƒ­ã‚°ã‚’èª­ã‚€å ´åˆã‚„è¿½åŠ è¦ä»¶ãŒã‚ã‚Œã°ãŠçŸ¥ã‚‰ã›ãã ã•ã„ã€‚

---

