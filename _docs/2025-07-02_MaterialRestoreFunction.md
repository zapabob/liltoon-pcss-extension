# 実装ログ: マテリアル復元機能の追加

## 概要

VRChatアバターアップロード時にマテリアルがmissingになり、シェーダーエラーでピンク色になる問題を解決するため、以下の対応を実施しました。

## 原因特定

- プロジェクト内に複数のバージョンの`com.liltoon.pcss-extension`パッケージが混在しており、これが原因でUnityのライブラリが競合し、シェーダーの参照が失われていました。

## 実施内容

1.  **不要なパッケージの削除:** 最新版以外の古いバージョンのパッケージフォルダを特定し、削除しました。
    - `com.liltoon.pcss-extension-1.5.3`
    - `com.liltoon.pcss-extension-1.5.4`
    - `com.liltoon.pcss-extension-1.5.5`
    - `test_extract`
2.  **マテリアルバックアップ機能の実装:**
    - アバターアップロード前にマテリアルの状態を保存し、問題発生時に復元できるように、新しいエディタ拡張機能 `MaterialBackup.cs` を作成しました。
    - この機能は、選択したGameObject（アバター）内の全マテリアルのシェーダー名をScriptableObjectとして`Assets/MaterialBackups`フォルダに保存します。
    - 保存したデータから、いつでもマテリアルのシェーダーを復元できます。

## 確認事項

- Unityエディタを再起動し、シェーダーエラーが解消されたことを確認してください。
- Unityエディタのメニューバーから `Tools > Material Backup` を選択し、バックアップと復元機能が利用できることを確認してください。